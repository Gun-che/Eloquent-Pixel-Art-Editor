!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=function(t,e){for(var n,o,i=[],u=2;u<arguments.length;u++)i[u-2]=arguments[u];var c=document.createElement(t);e&&Object.assign(c,e);try{for(var l=r(i),s=l.next();!s.done;s=l.next()){var a=s.value;"string"!=typeof a?c.appendChild(a):c.appendChild(document.createTextNode(a))}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}return c},i=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},u=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t},c=function(){function t(t,e){var n=this,r=e.tools,i=e.dispatch;this.select=o.apply(void 0,u(["select",{onchange:function(){return i({tool:n.select.value})}}],Object.keys(r).map((function(e){return o("option",{selected:e===t.tool},e)})))),this.dom=o("label",null,"🖌 Инструмент:",this.select)}return t.prototype.syncState=function(t){this.select.value=t.tool},t}(),l=function(){function t(t,e){var n=this,r=e.dispatch;this.input=o("input",{type:"color",value:t.color,onchange:function(){return r({color:n.input.value})}}),this.dom=o("label",null,"🎨 Цвет:",this.input)}return t.prototype.syncState=function(t){this.input.value=t.color},t}(),s=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}],a=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.plus=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.times=function(e){return new t(this.x*e,this.y*e)},t}();var p=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},h=function(){function t(t,e,n){this.level=t,this.actors=e,this.status=n}return t.start=function(e){return new t(e,e.startActors,"playing")},Object.defineProperty(t.prototype,"player",{get:function(){return this.actors.find((function(t){return"player"===t.type}))},enumerable:!1,configurable:!0}),t.prototype.update=function(e,n){var r,o,i=this,u=this.actors.map((function(t){return t.update(e,i,n)})),c=new t(this.level,u,this.status);if("playing"!==c.status)return c;var l,s,a=c.player;if(this.level.touches(a.pos,a.size,"lava"))return new t(this.level,u,"lost");try{for(var f=p(u),h=f.next();!h.done;h=f.next()){var y=h.value;y!==a&&(s=a,(l=y).pos.x+l.size.x>s.pos.x&&l.pos.x<s.pos.x+s.size.x&&l.pos.y+l.size.y>s.pos.y&&l.pos.y<s.pos.y+s.size.y)&&(c=y.collide(c))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}return c},t}(),y=(function(){function t(t,e,n){this.pos=t,this.basePos=e,this.wobble=n,this.size=new f(.6,.6)}Object.defineProperty(t.prototype,"type",{get:function(){return"coin"},enumerable:!1,configurable:!0}),t.create=function(e){var n=e.plus(new f(.2,.1));return new t(n,n,Math.random()*Math.PI*2)},t.prototype.collide=function(t){var e=this,n=t.actors.filter((function(t){return t!==e})),r=t.status;return n.some((function(t){return"coin"===t.type}))||(r="won"),new h(t.level,n,r)},t.prototype.update=function(e){var n=this.wobble+e*y,r=Math.sin(n)*d;return new t(this.basePos.plus(new f(0,r)),this.basePos,n)}}(),function(){function t(t,e,n){this.speed=e,this.pos=t,this.reset=n,this.size=new f(1,1)}Object.defineProperty(t.prototype,"type",{get:function(){return"lava"},enumerable:!1,configurable:!0}),t.create=function(e,n){switch(n){case"=":return new t(e,new f(2,0));case"|":return new t(e,new f(0,2));case"v":return new t(e,new f(0,3),e)}},t.prototype.collide=function(t){return new h(t.level,t.actors,"lost")},t.prototype.update=function(e,n){var r=this.pos.plus(this.speed.times(e));return n.level.touches(r,this.size,"wall")?this.reset?new t(this.reset,this.speed,this.reset):new t(this.pos,this.speed.times(-1)):new t(r,this.speed,this.reset)}}(),function(){function t(t,e){this.pos=t,this.speed=e,this.size=new f(.8,1.5)}Object.defineProperty(t.prototype,"type",{get:function(){return"player"},enumerable:!1,configurable:!0}),t.create=function(e){return new t(e.plus(new f(0,-.5)),new f(0,0))},t.prototype.update=function(e,n,r){var o=0;r.ArrowLeft&&(o-=v),r.ArrowRight&&(o+=v);var i=this.pos,u=i.plus(new f(o*e,0));n.level.touches(u,this.size,"wall")||(i=u);var c=this.speed.y+e*m,l=i.plus(new f(0,c*e));return n.level.touches(l,this.size,"wall")?c=r.ArrowUp&&c>0?-b:0:i=l,new t(i,new f(o,c))}}(),function(){function t(t){this.pos=t,this.size=new f(1.2,2)}Object.defineProperty(t.prototype,"type",{get:function(){return"monster"},enumerable:!1,configurable:!0}),t.create=function(e){return new t(e.plus(new f(0,-1)))},t.prototype.update=function(e,n){var r=(n.player.pos.x<this.pos.x?-1:1)*e*w,o=new f(this.pos.x+r,this.pos.y);return n.level.touches(o,this.size,"wall")?this:new t(o)},t.prototype.collide=function(t){var e=this,n=t.player;if(n.pos.y+n.size.y<this.pos.y+.5){var r=t.actors.filter((function(t){return t!=e}));return new h(t.level,r,t.status)}return new h(t.level,t.actors,"lost")}}(),8),d=.07,v=7,w=4,m=30,b=17,x=function(){function t(t,e){var n=this;this.dom=o("canvas",{onmousedown:function(t){return n.mouse(t,e)},ontouchstart:function(t){return n.touch(t,e)}}),this.syncState(t)}return t.prototype.syncState=function(t){this.picture!==t&&(this.picture=t,function(t,e,n){e.width=t.width*n,e.height=t.height*n;for(var r=e.getContext("2d"),o=0;o<t.height;o++)for(var i=0;i<t.width;i++)r.fillStyle=t.pixel(i,o),r.fillRect(i*n,o*n,n,n)}(this.picture,this.dom,20))},t.prototype.mouse=function(t,e){var n=this;if(0===t.button){var r=g(t,this.dom),o=e(r);if(o){var i=function(t){if(0===t.button)n.dom.removeEventListener("mousemove",i);else{var e=g(t,n.dom);if(e.x===r.x&&e.y===r.y)return;r=e,o(e)}};this.dom.addEventListener("mousemove",i)}}},t.prototype.touch=function(t,e){var n=this,r=g(t.touches[0],this.dom),o=e(r);if(t.preventDefault(),o){var i=function(t){var e=g(t.touches[0],n.dom);e.x===r.x&&e.y===r.y||(r=e,o(e))},u=function(){n.dom.removeEventListener("touchmove",i),n.dom.removeEventListener("touchend",u)};this.dom.addEventListener("touchmove",i),this.dom.addEventListener("touchend",u)}},t}();function g(t,e){var n=e.getBoundingClientRect();return{x:Math.floor((t.clientX-n.left)/20),y:Math.floor((t.clientY-n.top)/20)}}var S=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},j=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(S(arguments[e]));return t},O=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},z=function(){function t(t,e){var n=this,r=e.tools,i=e.controls,u=e.dispatch;this.state=t,this.canvas=new x(t.picture,(function(t){var e=(0,r[n.state.tool])(t,n.state,u);if(e)return function(t){return e(t,n.state)}})),this.controls=i.map((function(n){return new n(t,e)})),this.dom=o.apply(void 0,j(["div",{},this.canvas.dom,o("br",{})],this.controls.reduce((function(t,e){return t.concat(" ",e.dom)}),[])))}return t.prototype.syncState=function(t){var e,n;this.state=t,this.canvas.syncState(t.picture);try{for(var r=O(this.controls),o=r.next();!o.done;o=r.next()){o.value.syncState(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t}(),P=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},M={tool:"draw",color:"#000000",picture:function(){function t(t,e,n){this.width=t,this.height=e,this.pixels=n}return t.empty=function(e,n,r){return new t(e,n,new Array(e*n).fill(r))},t.prototype.pixel=function(t,e){return this.pixels[t+e*this.width]},t.prototype.draw=function(e){var n,r,o=this.pixels.slice();try{for(var i=P(e),u=i.next();!u.done;u=i.next()){var c=u.value,l=c.x,s=c.y,a=c.color;o[l+s*this.width]=a}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return new t(this.width,this.height,o)},t}().empty(60,30,"#f0f0f0")},E=new z(M,{tools:{draw:function(t,e,n){function r(t,e){var r={x:t.x,y:t.y,color:e.color};n({picture:e.picture.draw([r])})}return r(t,e),r},fill:function(t,e,n){for(var r,o,i=t.x,u=t.y,c=e.picture.pixel(i,u),l=[{x:i,y:u,color:e.color}],f=0;f<l.length;f++){var p=function(t,n){var r=l[f].x+t,o=l[f].y+n;r>=0&&r<e.picture.width&&o>=0&&o<e.picture.height&&e.picture.pixel(r,o)===c&&!l.some((function(t){return t.x===r&&t.y===o}))&&l.push({x:r,y:o,color:e.color})};try{for(var h=(r=void 0,a(s)),y=h.next();!y.done;y=h.next()){var d=y.value;p(d.dx,d.dy)}}catch(t){r={error:t}}finally{try{y&&!y.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}}n({picture:e.picture.draw(l)})},rectangle:function(t,e,n){function r(r){for(var o=Math.min(t.x,r.x),i=Math.min(t.y,r.y),u=Math.max(t.x,r.x),c=Math.max(t.y,r.y),l=[],s=i;s<=c;s++)for(var a=o;a<=u;a++)l.push({x:a,y:s,color:e.color});n({picture:e.picture.draw(l)})}return r(t),r},pick:function(t,e,n){n({color:e.picture.pixel(t.x,t.y)})}},controls:[c,l],dispatch:function(t){M=function(t,e){return Object.assign({},t,e)}(M,t),E.syncState(M)}});document.querySelector("div").appendChild(E.dom)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXRlL3VwZGF0ZVN0YXRlLnRzIiwid2VicGFjazovLy8uL3NyYy91dGlscy9lbHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvVG9vbHMvVG9vbFNlbGVjdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9Ub29scy9Db2xvclNlbGVjdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29uc3RzLnRzIiwid2VicGFjazovLy8uLi9HYW1lL3NyYy9WZWMudHMiLCJ3ZWJwYWNrOi8vLy4uL0dhbWUvc3JjL1N0YXRlLnRzIiwid2VicGFjazovLy8uLi9HYW1lL3NyYy9oZWxwZXJzLnRzIiwid2VicGFjazovLy8uLi9HYW1lL3NyYy9jb25zdHMudHMiLCJ3ZWJwYWNrOi8vLy4uL0dhbWUvc3JjL2FjdG9ycy9Db2luLnRzIiwid2VicGFjazovLy8uLi9HYW1lL3NyYy9hY3RvcnMvTGF2YS50cyIsIndlYnBhY2s6Ly8vLi4vR2FtZS9zcmMvYWN0b3JzL1BsYXllci50cyIsIndlYnBhY2s6Ly8vLi4vR2FtZS9zcmMvYWN0b3JzL01vbnN0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvQ2FudmFzLnRzIiwid2VicGFjazovLy8uL3NyYy91dGlscy9kcmF3UGljdHVyZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9QaXhlbEVkaXRvci50cyIsIndlYnBhY2s6Ly8vLi9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9QaWN0dXJlLnRzIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL1Rvb2xzL2RyYXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvVG9vbHMvZmlsbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9Ub29scy9yZWN0YW5nbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvVG9vbHMvcGlja0NvbG9yLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZWx0IiwidHlwZSIsInByb3BzIiwiZG9tIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYXNzaWduIiwiY2hpbGRyZW4iLCJjaGlsZCIsImFwcGVuZENoaWxkIiwiY3JlYXRlVGV4dE5vZGUiLCJzdGF0ZSIsInRvb2xzIiwiZGlzcGF0Y2giLCJ0aGlzIiwic2VsZWN0Iiwib25jaGFuZ2UiLCJ0b29sIiwia2V5cyIsIm1hcCIsInNlbGVjdGVkIiwic3luY1N0YXRlIiwiaW5wdXQiLCJjb2xvciIsImFyb3VuZCIsImR4IiwiZHkiLCJ4IiwieSIsInBsdXMiLCJvdGhlciIsIlZlYyIsInRpbWVzIiwiZmFjdG9yIiwibGV2ZWwiLCJhY3RvcnMiLCJzdGF0dXMiLCJzdGFydCIsIlN0YXRlIiwic3RhcnRBY3RvcnMiLCJmaW5kIiwiYSIsInVwZGF0ZSIsInRpbWUiLCJhY3RvciIsIm5ld1N0YXRlIiwiYWN0b3IxIiwiYWN0b3IyIiwicGxheWVyIiwidG91Y2hlcyIsInBvcyIsInNpemUiLCJjb2xsaWRlIiwid29iYmxlU3BlZWQiLCJiYXNlUG9zIiwid29iYmxlIiwiQ29pbiIsIk1hdGgiLCJyYW5kb20iLCJQSSIsImZpbHRyZWQiLCJmaWx0ZXIiLCJzb21lIiwid29iYmxlUG9zIiwic2luIiwid29iYmxlRGlzdCIsInNwZWVkIiwicmVzZXQiLCJjaCIsIkxhdmEiLCJuZXdQb3MiLCJQbGF5ZXIiLCJ4U3BlZWQiLCJBcnJvd0xlZnQiLCJwbGF5ZXJYU3BlZWQiLCJBcnJvd1JpZ2h0IiwibW92ZWRYIiwieVNwZWVkIiwiZ3Jhdml0eSIsIm1vdmVkWSIsIkFycm93VXAiLCJqdW1wU3BlZWQiLCJNb25zdGVyIiwibW9uc3RlclNwZWVkIiwiZmlsdGVyZWQiLCJwaWN0dXJlIiwicG9pbnRlckRvd24iLCJvbm1vdXNlZG93biIsImUiLCJtb3VzZSIsIm9udG91Y2hzdGFydCIsInRvdWNoIiwiY2FudmFzIiwic2NhbGUiLCJ3aWR0aCIsImhlaWdodCIsImN4IiwiZ2V0Q29udGV4dCIsImZpbGxTdHlsZSIsInBpeGVsIiwiZmlsbFJlY3QiLCJkcmF3UGljdHVyZSIsImRvd25FdmVudCIsIm9uRG93biIsImJ1dHRvbiIsInBvaW50ZXJQb3NpdGlvbiIsIm9uTW92ZSIsIm1vdmUiLCJtb3ZlRXZlbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0YXJ0RXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImVuZCIsImRvbU5vZGUiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZmxvb3IiLCJjbGllbnRYIiwibGVmdCIsImNsaWVudFkiLCJ0b3AiLCJjb25maWciLCJjb250cm9scyIsIkNvbnRyb2wiLCJyZWR1Y2UiLCJjb25jYXQiLCJwaXhlbHMiLCJlbXB0eSIsIlBpY3R1cmUiLCJBcnJheSIsImZpbGwiLCJkcmF3IiwiY29weSIsInNsaWNlIiwiYXBwIiwiZHJhd1BpeGVsIiwiZHJhd24iLCJ0YXJnZXRDb2xvciIsImRvbmUiLCJsZW5ndGgiLCJwdXNoIiwicmVjdGFuZ2xlIiwiZHJhd1JlY3RhbmdsZSIsInhTdGFydCIsIm1pbiIsInlTdGFydCIsInhFbmQiLCJtYXgiLCJ5RW5kIiwicGljayIsImFjdGlvbiIsInVwZGF0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QUFPNEksR2dCaUJ0QkMsQ0FBWSxFQUFPRCxHQUMzQmhCLEVBQUlsSCxVQUFVLE1BR2xCakIsU0FBU3FKLGNBQWMsT0FBT2hKLFlBQVk4SCxFQUFJcEkiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IHsgSVN0YXRlLCBJQWN0aW9uIH0gZnJvbSAnLi8uLi90cy9pbmRleCc7XHJcblxyXG5leHBvcnQgY29uc3QgdXBkYXRlU3RhdGUgPSAoc3RhdGU6IElTdGF0ZSwgYWN0aW9uOiBJQWN0aW9uKSA9PiB7XHJcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLCBhY3Rpb24pO1xyXG59IiwiZXhwb3J0IGNvbnN0IGVsdCA9ICh0eXBlOiBzdHJpbmcsIHByb3BzOiBhbnksIC4uLmNoaWxkcmVuOiAoc3RyaW5nIHwgSFRNTEVsZW1lbnQpW10pID0+IHtcclxuICBsZXQgZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcclxuXHJcbiAgaWYgKHByb3BzKSBPYmplY3QuYXNzaWduKGRvbSwgcHJvcHMpO1xyXG5cclxuICBmb3IgKGxldCBjaGlsZCBvZiBjaGlsZHJlbikge1xyXG5cclxuICAgIGlmICh0eXBlb2YgY2hpbGQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIGRvbS5hcHBlbmRDaGlsZChjaGlsZCk7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZG9tLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNoaWxkKSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBkb207XHJcbn0iLCJpbXBvcnQgeyBlbHQgfSBmcm9tICcuLy4uLy4uL3V0aWxzL2VsdCc7XHJcblxyXG5leHBvcnQgY2xhc3MgVG9vbFNlbGVjdCB7XHJcbiAgc2VsZWN0OiBIVE1MU2VsZWN0RWxlbWVudDtcclxuICBkb206IEhUTUxFbGVtZW50O1xyXG4gIGNvbnN0cnVjdG9yKHN0YXRlLCB7IHRvb2xzLCBkaXNwYXRjaCB9KSB7XHJcbiAgICB0aGlzLnNlbGVjdCA9IChlbHQoJ3NlbGVjdCcsIHtcclxuICAgICAgb25jaGFuZ2U6ICgpID0+IGRpc3BhdGNoKHsgdG9vbDogdGhpcy5zZWxlY3QudmFsdWUgfSlcclxuICAgIH0sIC4uLk9iamVjdC5rZXlzKHRvb2xzKS5tYXAobmFtZSA9PiBlbHQoJ29wdGlvbicsIHtcclxuICAgICAgc2VsZWN0ZWQ6IG5hbWUgPT09IHN0YXRlLnRvb2xcclxuICAgIH0sIG5hbWUpKSkgYXMgSFRNTFNlbGVjdEVsZW1lbnQpO1xyXG4gICAgdGhpcy5kb20gPSBlbHQoJ2xhYmVsJywgbnVsbCwgJ/Cflowg0JjQvdGB0YLRgNGD0LzQtdC90YI6JywgdGhpcy5zZWxlY3QpO1xyXG4gIH1cclxuXHJcbiAgc3luY1N0YXRlKHN0YXRlKSB7XHJcbiAgICB0aGlzLnNlbGVjdC52YWx1ZSA9IHN0YXRlLnRvb2w7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElTdGF0ZSwgSURpc3BhdGNoIH0gZnJvbSAnLi8uLi8uLi90cy9pbmRleCc7XHJcbmltcG9ydCB7IGVsdCB9IGZyb20gJy4vLi4vLi4vdXRpbHMvZWx0JztcclxuXHJcbmV4cG9ydCBjbGFzcyBDb2xvclNlbGVjdCB7XHJcbiAgaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgZG9tOiBIVE1MRWxlbWVudDtcclxuICBjb25zdHJ1Y3RvcihzdGF0ZTogSVN0YXRlLCB7IGRpc3BhdGNoIH0pIHtcclxuICAgIHRoaXMuaW5wdXQgPSAoZWx0KCdpbnB1dCcsIHtcclxuICAgICAgdHlwZTogJ2NvbG9yJyxcclxuICAgICAgdmFsdWU6IHN0YXRlLmNvbG9yLFxyXG4gICAgICBvbmNoYW5nZTogKCkgPT4gZGlzcGF0Y2goeyBjb2xvcjogdGhpcy5pbnB1dC52YWx1ZSB9KVxyXG4gICAgfSkgYXMgSFRNTElucHV0RWxlbWVudCk7XHJcbiAgICB0aGlzLmRvbSA9IGVsdCgnbGFiZWwnLCBudWxsLCAn8J+OqCDQptCy0LXRgjonLCB0aGlzLmlucHV0KVxyXG4gIH1cclxuXHJcbiAgc3luY1N0YXRlKHN0YXRlOiBJU3RhdGUpOiB2b2lkIHtcclxuICAgIHRoaXMuaW5wdXQudmFsdWUgPSBzdGF0ZS5jb2xvcjtcclxuICB9XHJcbn0iLCJleHBvcnQgY29uc3Qgc2NhbGUgPSAxMDtcclxuXHJcbmV4cG9ydCBjb25zdCBhcm91bmQgPSBbeyBkeDogLTEsIGR5OiAwIH0sIHsgZHg6IDEsIGR5OiAwIH0sIHsgZHg6IDAsIGR5OiAtMSB9LCB7IGR4OiAwLCBkeTogMSB9LF1cclxuIiwiXHJcbmV4cG9ydCBjbGFzcyBWZWMge1xyXG4gIHg6IG51bWJlcjtcclxuICB5OiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxuICB9XHJcblxyXG4gIHBsdXMob3RoZXI6IFZlYykge1xyXG4gICAgcmV0dXJuIG5ldyBWZWModGhpcy54ICsgb3RoZXIueCwgdGhpcy55ICsgb3RoZXIueSlcclxuICB9XHJcblxyXG4gIHRpbWVzKGZhY3RvcjogbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gbmV3IFZlYyh0aGlzLnggKiBmYWN0b3IsIHRoaXMueSAqIGZhY3RvcilcclxuICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IExldmVsIH0gZnJvbSAnLi9MZXZlbCdcclxuaW1wb3J0IHsgb3ZlcmxhcCB9IGZyb20gJy4vaGVscGVycyc7XHJcblxyXG5leHBvcnQgY2xhc3MgU3RhdGUge1xyXG4gIGxldmVsOiBMZXZlbDtcclxuICBhY3RvcnM6IGFueTtcclxuICBzdGF0dXM6IHN0cmluZztcclxuICBzdGFydDogYW55O1xyXG5cclxuICBjb25zdHJ1Y3RvcihsZXZlbDogTGV2ZWwsIGFjdG9yczogYW55LCBzdGF0dXM6IHN0cmluZykge1xyXG4gICAgdGhpcy5sZXZlbCA9IGxldmVsO1xyXG4gICAgdGhpcy5hY3RvcnMgPSBhY3RvcnM7XHJcbiAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBzdGFydChsZXZlbDogTGV2ZWwpIHtcclxuICAgIHJldHVybiBuZXcgU3RhdGUobGV2ZWwsIGxldmVsLnN0YXJ0QWN0b3JzLCAncGxheWluZycpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHBsYXllcigpIHtcclxuICAgIHJldHVybiB0aGlzLmFjdG9ycy5maW5kKGEgPT4gYS50eXBlID09PSAncGxheWVyJyk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUodGltZTogbnVtYmVyLCBrZXlzOiBhbnkpIHtcclxuICAgIGxldCBhY3RvcnMgPSB0aGlzLmFjdG9yc1xyXG4gICAgICAubWFwKGFjdG9yID0+IGFjdG9yLnVwZGF0ZSh0aW1lLCB0aGlzLCBrZXlzKSk7XHJcbiAgICBsZXQgbmV3U3RhdGUgPSBuZXcgU3RhdGUodGhpcy5sZXZlbCwgYWN0b3JzLCB0aGlzLnN0YXR1cyk7XHJcblxyXG4gICAgaWYgKG5ld1N0YXRlLnN0YXR1cyAhPT0gJ3BsYXlpbmcnKSByZXR1cm4gbmV3U3RhdGU7XHJcblxyXG4gICAgbGV0IHBsYXllciA9IG5ld1N0YXRlLnBsYXllcjtcclxuICAgIGlmICh0aGlzLmxldmVsLnRvdWNoZXMocGxheWVyLnBvcywgcGxheWVyLnNpemUsICdsYXZhJykpIHtcclxuICAgICAgcmV0dXJuIG5ldyBTdGF0ZSh0aGlzLmxldmVsLCBhY3RvcnMsICdsb3N0JylcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGxldCBhY3RvciBvZiBhY3RvcnMpIHtcclxuICAgICAgaWYgKGFjdG9yICE9PSBwbGF5ZXIgJiYgb3ZlcmxhcChhY3RvciwgcGxheWVyKSkge1xyXG4gICAgICAgIG5ld1N0YXRlID0gYWN0b3IuY29sbGlkZShuZXdTdGF0ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBuZXdTdGF0ZTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBJQWN0b3IgfSBmcm9tICcuL3RzL2luZGV4J1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG92ZXJsYXAoYWN0b3IxOiBJQWN0b3IsIGFjdG9yMjogSUFjdG9yKSB7XHJcbiAgcmV0dXJuIGFjdG9yMS5wb3MueCArIGFjdG9yMS5zaXplLnggPiBhY3RvcjIucG9zLnggJiZcclxuICAgIGFjdG9yMS5wb3MueCA8IGFjdG9yMi5wb3MueCArIGFjdG9yMi5zaXplLnggJiZcclxuICAgIGFjdG9yMS5wb3MueSArIGFjdG9yMS5zaXplLnkgPiBhY3RvcjIucG9zLnkgJiZcclxuICAgIGFjdG9yMS5wb3MueSA8IGFjdG9yMi5wb3MueSArIGFjdG9yMi5zaXplLnk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlbHQobmFtZTogc3RyaW5nLCBhdHRyczogYW55LCAuLi5jaGlsZHJlbjogSFRNTEVsZW1lbnRbXSk6IEhUTUxFbGVtZW50IHtcclxuICBsZXQgZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKTtcclxuXHJcbiAgZm9yIChsZXQgYXR0ciBvZiBPYmplY3Qua2V5cyhhdHRycykpIHtcclxuICAgIGRvbS5zZXRBdHRyaWJ1dGUoYXR0ciwgYXR0cnNbYXR0cl0pO1xyXG4gIH1cclxuXHJcbiAgZm9yIChsZXQgY2hpbGQgb2YgY2hpbGRyZW4pIHtcclxuICAgIGRvbS5hcHBlbmRDaGlsZChjaGlsZCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZG9tO1xyXG59IiwiaW1wb3J0IHsgQ29pbiB9IGZyb20gJy4vYWN0b3JzL0NvaW4nXHJcbmltcG9ydCB7IExhdmEgfSBmcm9tICcuL2FjdG9ycy9MYXZhJ1xyXG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tICcuL2FjdG9ycy9QbGF5ZXInXHJcbmltcG9ydCB7IE1vbnN0ZXIgfSBmcm9tICcuL2FjdG9ycy9Nb25zdGVyJztcclxuXHJcbmV4cG9ydCBjb25zdCBsZXZlbENoYXJzOiB7XHJcbiAgJy4nOiAnZW1wdHknLFxyXG4gICcjJzogJ3dhbGwnLFxyXG4gICcrJzogJ2xhdmEnLFxyXG4gICdAJzogdHlwZW9mIFBsYXllcixcclxuICAnbyc6IHR5cGVvZiBDb2luLFxyXG4gICc9JzogdHlwZW9mIExhdmEsXHJcbiAgJ3YnOiB0eXBlb2YgTGF2YSxcclxuICAnfCc6IHR5cGVvZiBMYXZhLFxyXG4gICdNJzogdHlwZW9mIE1vbnN0ZXIsXHJcbn0gPSB7XHJcbiAgJy4nOiAnZW1wdHknLFxyXG4gICcjJzogJ3dhbGwnLFxyXG4gICcrJzogJ2xhdmEnLFxyXG4gICdAJzogUGxheWVyLFxyXG4gICdvJzogQ29pbixcclxuICAnPSc6IExhdmEsXHJcbiAgJ3YnOiBMYXZhLFxyXG4gICd8JzogTGF2YSxcclxuICAnTSc6IE1vbnN0ZXIsXHJcbn1cclxuXHJcblxyXG5leHBvcnQgY29uc3Qgc2NhbGUgPSAyMDtcclxuXHJcbmV4cG9ydCBjb25zdCB3b2JibGVTcGVlZCA9IDg7XHJcblxyXG5leHBvcnQgY29uc3Qgd29iYmxlRGlzdCA9IDAuMDc7XHJcblxyXG5leHBvcnQgY29uc3QgcGxheWVyWFNwZWVkID0gNztcclxuXHJcbmV4cG9ydCBjb25zdCBtb25zdGVyU3BlZWQgPSA0O1xyXG5cclxuZXhwb3J0IGNvbnN0IGdyYXZpdHkgPSAzMDtcclxuXHJcbmV4cG9ydCBjb25zdCBqdW1wU3BlZWQgPSAxNztcclxuXHJcbmV4cG9ydCBjb25zdCBwbGF5ZXJYT3ZlcmxhcCA9IDQ7IiwiaW1wb3J0IHsgd29iYmxlRGlzdCwgd29iYmxlU3BlZWQgfSBmcm9tICcuLy4uL2NvbnN0cyc7XHJcbmltcG9ydCB7IFZlYyB9IGZyb20gJy4uL1ZlYydcclxuaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuLi9TdGF0ZSdcclxuXHJcbmV4cG9ydCBjbGFzcyBDb2luIHtcclxuICBwb3M6IFZlYztcclxuICBiYXNlUG9zOiBWZWM7XHJcbiAgd29iYmxlOiBudW1iZXI7XHJcbiAgc2l6ZTogVmVjO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwb3M6IFZlYywgYmFzZVBvczogVmVjLCB3b2JibGU6IG51bWJlcikge1xyXG4gICAgdGhpcy5wb3MgPSBwb3M7XHJcbiAgICB0aGlzLmJhc2VQb3MgPSBiYXNlUG9zO1xyXG4gICAgdGhpcy53b2JibGUgPSB3b2JibGU7XHJcbiAgICB0aGlzLnNpemUgPSBuZXcgVmVjKDAuNiwgMC42KTtcclxuICB9XHJcblxyXG4gIGdldCB0eXBlKCkge1xyXG4gICAgcmV0dXJuICdjb2luJztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjcmVhdGUocG9zOiBWZWMpIHtcclxuICAgIGxldCBiYXNlUG9zID0gcG9zLnBsdXMobmV3IFZlYygwLjIsIDAuMSkpO1xyXG4gICAgcmV0dXJuIG5ldyBDb2luKGJhc2VQb3MsIGJhc2VQb3MsIE1hdGgucmFuZG9tKCkgKiBNYXRoLlBJICogMilcclxuICB9XHJcblxyXG4gIGNvbGxpZGUoc3RhdGU6IFN0YXRlKTogU3RhdGUge1xyXG4gICAgbGV0IGZpbHRyZWQgPSBzdGF0ZS5hY3RvcnMuZmlsdGVyKGEgPT4gYSAhPT0gdGhpcyk7XHJcbiAgICBsZXQgc3RhdHVzID0gc3RhdGUuc3RhdHVzO1xyXG5cclxuICAgIGlmICghZmlsdHJlZC5zb21lKGEgPT4gYS50eXBlID09PSAnY29pbicpKSB7XHJcbiAgICAgIHN0YXR1cyA9ICd3b24nO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBTdGF0ZShzdGF0ZS5sZXZlbCwgZmlsdHJlZCwgc3RhdHVzKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZSh0aW1lOiBudW1iZXIpIHtcclxuICAgIGxldCB3b2JibGUgPSB0aGlzLndvYmJsZSArIHRpbWUgKiB3b2JibGVTcGVlZDtcclxuICAgIGxldCB3b2JibGVQb3MgPSBNYXRoLnNpbih3b2JibGUpICogd29iYmxlRGlzdDtcclxuXHJcbiAgICByZXR1cm4gbmV3IENvaW4odGhpcy5iYXNlUG9zLnBsdXMobmV3IFZlYygwLCB3b2JibGVQb3MpKSwgdGhpcy5iYXNlUG9zLCB3b2JibGUpO1xyXG4gIH07XHJcbn1cclxuIiwiaW1wb3J0IHsgVmVjIH0gZnJvbSAnLi4vVmVjJ1xyXG5pbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4uL1N0YXRlJ1xyXG5pbXBvcnQgeyBJTGF2YUNoIH0gZnJvbSAnLi4vdHMnXHJcblxyXG5leHBvcnQgY2xhc3MgTGF2YSB7XHJcbiAgcG9zOiBWZWM7XHJcbiAgc3BlZWQ6IFZlYztcclxuICByZXNldD86IFZlYztcclxuICBzaXplOiBWZWM7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBvczogVmVjLCBzcGVlZDogVmVjLCByZXNldD86IFZlYykge1xyXG4gICAgdGhpcy5zcGVlZCA9IHNwZWVkO1xyXG4gICAgdGhpcy5wb3MgPSBwb3M7XHJcbiAgICB0aGlzLnJlc2V0ID0gcmVzZXQ7XHJcbiAgICB0aGlzLnNpemUgPSBuZXcgVmVjKDEsIDEpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHR5cGUoKSB7XHJcbiAgICByZXR1cm4gJ2xhdmEnO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZShwb3M6IFZlYywgY2g6IElMYXZhQ2gpIHtcclxuICAgIHN3aXRjaCAoY2gpIHtcclxuICAgICAgY2FzZSAnPSc6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMYXZhKHBvcywgbmV3IFZlYygyLCAwKSk7XHJcbiAgICAgIGNhc2UgJ3wnOlxyXG4gICAgICAgIHJldHVybiBuZXcgTGF2YShwb3MsIG5ldyBWZWMoMCwgMikpO1xyXG4gICAgICBjYXNlICd2JzpcclxuICAgICAgICByZXR1cm4gbmV3IExhdmEocG9zLCBuZXcgVmVjKDAsIDMpLCBwb3MpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29sbGlkZShzdGF0ZTogU3RhdGUpOiBTdGF0ZSB7XHJcbiAgICByZXR1cm4gbmV3IFN0YXRlKHN0YXRlLmxldmVsLCBzdGF0ZS5hY3RvcnMsICdsb3N0Jyk7XHJcbiAgfTtcclxuXHJcbiAgdXBkYXRlKHRpbWU6IG51bWJlciwgc3RhdGU6IFN0YXRlKTogTGF2YSB7XHJcbiAgICBsZXQgbmV3UG9zID0gdGhpcy5wb3MucGx1cyh0aGlzLnNwZWVkLnRpbWVzKHRpbWUpKTtcclxuICAgIGlmICghc3RhdGUubGV2ZWwudG91Y2hlcyhuZXdQb3MsIHRoaXMuc2l6ZSwgJ3dhbGwnKSkge1xyXG4gICAgICByZXR1cm4gbmV3IExhdmEobmV3UG9zLCB0aGlzLnNwZWVkLCB0aGlzLnJlc2V0KTtcclxuXHJcbiAgICB9IGVsc2UgaWYgKHRoaXMucmVzZXQpIHtcclxuICAgICAgcmV0dXJuIG5ldyBMYXZhKHRoaXMucmVzZXQsIHRoaXMuc3BlZWQsIHRoaXMucmVzZXQpO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBuZXcgTGF2YSh0aGlzLnBvcywgdGhpcy5zcGVlZC50aW1lcygtMSkpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBncmF2aXR5LCBqdW1wU3BlZWQgfSBmcm9tICcuLy4uL2NvbnN0cyc7XHJcbmltcG9ydCB7IFZlYyB9IGZyb20gJy4uL1ZlYydcclxuaW1wb3J0IHsgcGxheWVyWFNwZWVkIH0gZnJvbSAnLi4vY29uc3RzJztcclxuaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuLi9TdGF0ZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgUGxheWVyIHtcclxuICBwb3M6IFZlYztcclxuICBzcGVlZDogVmVjO1xyXG4gIHNpemU6IFZlYztcclxuXHJcbiAgY29uc3RydWN0b3IocG9zOiBWZWMsIHNwZWVkOiBWZWMpIHtcclxuICAgIHRoaXMucG9zID0gcG9zO1xyXG4gICAgdGhpcy5zcGVlZCA9IHNwZWVkO1xyXG4gICAgdGhpcy5zaXplID0gbmV3IFZlYygwLjgsIDEuNSk7XHJcbiAgfVxyXG5cclxuICBnZXQgdHlwZSgpIHsgcmV0dXJuICdwbGF5ZXInIH1cclxuXHJcbiAgc3RhdGljIGNyZWF0ZShwb3M6IFZlYykge1xyXG4gICAgcmV0dXJuIG5ldyBQbGF5ZXIocG9zLnBsdXMobmV3IFZlYygwLCAtMC41KSksXHJcbiAgICAgIG5ldyBWZWMoMCwgMCkpXHJcbiAgfVxyXG5cclxuICB1cGRhdGUodGltZTogbnVtYmVyLCBzdGF0ZTogU3RhdGUsIGtleXM6IGFueSk6IFBsYXllciB7XHJcbiAgICBsZXQgeFNwZWVkID0gMDtcclxuICAgIGlmIChrZXlzLkFycm93TGVmdCkge1xyXG4gICAgICB4U3BlZWQgLT0gcGxheWVyWFNwZWVkO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChrZXlzLkFycm93UmlnaHQpIHtcclxuICAgICAgeFNwZWVkICs9IHBsYXllclhTcGVlZDtcclxuICAgIH1cclxuICAgIGxldCBwb3MgPSB0aGlzLnBvcztcclxuICAgIGxldCBtb3ZlZFggPSBwb3MucGx1cyhuZXcgVmVjKHhTcGVlZCAqIHRpbWUsIDApKTtcclxuXHJcbiAgICBpZiAoIXN0YXRlLmxldmVsLnRvdWNoZXMobW92ZWRYLCB0aGlzLnNpemUsICd3YWxsJykpIHtcclxuICAgICAgcG9zID0gbW92ZWRYO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCB5U3BlZWQgPSB0aGlzLnNwZWVkLnkgKyB0aW1lICogZ3Jhdml0eTtcclxuICAgIGxldCBtb3ZlZFkgPSBwb3MucGx1cyhuZXcgVmVjKDAsIHlTcGVlZCAqIHRpbWUpKTtcclxuXHJcbiAgICBpZiAoIXN0YXRlLmxldmVsLnRvdWNoZXMobW92ZWRZLCB0aGlzLnNpemUsICd3YWxsJykpIHtcclxuICAgICAgcG9zID0gbW92ZWRZO1xyXG5cclxuICAgIH0gZWxzZSBpZiAoa2V5cy5BcnJvd1VwICYmIHlTcGVlZCA+IDApIHtcclxuICAgICAgeVNwZWVkID0gLWp1bXBTcGVlZDtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB5U3BlZWQgPSAwO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBQbGF5ZXIocG9zLCBuZXcgVmVjKHhTcGVlZCwgeVNwZWVkKSk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgVmVjIH0gZnJvbSAnLi8uLi9WZWMnO1xyXG5pbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4uL1N0YXRlJztcclxuaW1wb3J0IHsgbW9uc3RlclNwZWVkIH0gZnJvbSAnLi4vY29uc3RzJztcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgTW9uc3RlciB7XHJcbiAgcG9zOiBWZWM7XHJcbiAgc2l6ZTogVmVjO1xyXG4gIGNvbnN0cnVjdG9yKHBvczogVmVjKSB7XHJcbiAgICB0aGlzLnBvcyA9IHBvcztcclxuICAgIHRoaXMuc2l6ZSA9IG5ldyBWZWMoMS4yLCAyKTtcclxuICB9XHJcblxyXG4gIGdldCB0eXBlKCkge1xyXG4gICAgcmV0dXJuICdtb25zdGVyJztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBjcmVhdGUocG9zOiBWZWMpOiBNb25zdGVyIHtcclxuICAgIHJldHVybiBuZXcgTW9uc3Rlcihwb3MucGx1cyhuZXcgVmVjKDAsIC0xKSkpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlKHRpbWU6IG51bWJlciwgc3RhdGU6IFN0YXRlKTogTW9uc3RlciB7XHJcbiAgICBsZXQgcGxheWVyID0gc3RhdGUucGxheWVyO1xyXG4gICAgbGV0IHNwZWVkID0gKHBsYXllci5wb3MueCA8IHRoaXMucG9zLnggPyAtMSA6IDEpICogdGltZSAqIG1vbnN0ZXJTcGVlZDtcclxuICAgIGxldCBuZXdQb3MgPSBuZXcgVmVjKHRoaXMucG9zLnggKyBzcGVlZCwgdGhpcy5wb3MueSk7XHJcblxyXG4gICAgaWYgKHN0YXRlLmxldmVsLnRvdWNoZXMobmV3UG9zLCB0aGlzLnNpemUsICd3YWxsJykpIHtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG5ldyBNb25zdGVyKG5ld1BvcylcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbGxpZGUoc3RhdGU6IFN0YXRlKSB7XHJcbiAgICBsZXQgcGxheWVyID0gc3RhdGUucGxheWVyO1xyXG4gICAgaWYgKHBsYXllci5wb3MueSArIHBsYXllci5zaXplLnkgPCB0aGlzLnBvcy55ICsgMC41KSB7XHJcbiAgICAgIGxldCBmaWx0ZXJlZCA9IHN0YXRlLmFjdG9ycy5maWx0ZXIoYSA9PiBhICE9IHRoaXMpO1xyXG4gICAgICByZXR1cm4gbmV3IFN0YXRlKHN0YXRlLmxldmVsLCBmaWx0ZXJlZCwgc3RhdGUuc3RhdHVzKTtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbmV3IFN0YXRlKHN0YXRlLmxldmVsLCBzdGF0ZS5hY3RvcnMsICdsb3N0JylcclxuICAgIH1cclxuICB9XHJcbn0iLCJpbXBvcnQgeyBzY2FsZSB9IGZyb20gJy4uLy4uLy4uL0dhbWUvc3JjL2NvbnN0cyc7XHJcbmltcG9ydCB7IGVsdCB9IGZyb20gJy4uL3V0aWxzL2VsdCc7XHJcbmltcG9ydCB7IFBpY3R1cmUgfSBmcm9tICcuL1BpY3R1cmUnO1xyXG5pbXBvcnQgeyBkcmF3UGljdHVyZSB9IGZyb20gJy4uL3V0aWxzL2RyYXdQaWN0dXJlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQaWN0dXJlQ2FudmFzIHtcclxuICBkb206IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gIHBpY3R1cmU6IFBpY3R1cmU7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBpY3R1cmU6IFBpY3R1cmUsIHBvaW50ZXJEb3duKSB7XHJcbiAgICB0aGlzLmRvbSA9IChlbHQoJ2NhbnZhcycsIHtcclxuICAgICAgb25tb3VzZWRvd246IChlOiBNb3VzZUV2ZW50KSA9PiB0aGlzLm1vdXNlKGUsIHBvaW50ZXJEb3duKSxcclxuICAgICAgb250b3VjaHN0YXJ0OiAoZTogVG91Y2hFdmVudCkgPT4gdGhpcy50b3VjaChlLCBwb2ludGVyRG93bilcclxuICAgIH0pIGFzIEhUTUxDYW52YXNFbGVtZW50KTtcclxuXHJcbiAgICB0aGlzLnN5bmNTdGF0ZShwaWN0dXJlKTtcclxuICB9XHJcblxyXG4gIHN5bmNTdGF0ZShwaWN0dXJlOiBQaWN0dXJlKSB7XHJcbiAgICBpZiAodGhpcy5waWN0dXJlID09PSBwaWN0dXJlKSByZXR1cm47XHJcbiAgICB0aGlzLnBpY3R1cmUgPSBwaWN0dXJlO1xyXG4gICAgZHJhd1BpY3R1cmUodGhpcy5waWN0dXJlLCB0aGlzLmRvbSwgc2NhbGUpO1xyXG4gIH1cclxuXHJcbiAgbW91c2UoZG93bkV2ZW50OiBNb3VzZUV2ZW50LCBvbkRvd24pIHtcclxuXHJcbiAgICBpZiAoZG93bkV2ZW50LmJ1dHRvbiAhPT0gMCkgcmV0dXJuO1xyXG5cclxuICAgIGxldCBwb3MgPSBwb2ludGVyUG9zaXRpb24oZG93bkV2ZW50LCB0aGlzLmRvbSk7XHJcbiAgICBsZXQgb25Nb3ZlID0gb25Eb3duKHBvcyk7XHJcblxyXG4gICAgaWYgKCFvbk1vdmUpIHJldHVybjtcclxuXHJcbiAgICBsZXQgbW92ZSA9IChtb3ZlRXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuXHJcbiAgICAgIGlmIChtb3ZlRXZlbnQuYnV0dG9uID09PSAwKSB7XHJcbiAgICAgICAgdGhpcy5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW92ZSk7XHJcblxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxldCBuZXdQb3MgPSBwb2ludGVyUG9zaXRpb24obW92ZUV2ZW50LCB0aGlzLmRvbSk7XHJcblxyXG4gICAgICAgIGlmIChuZXdQb3MueCA9PT0gcG9zLnggJiYgbmV3UG9zLnkgPT09IHBvcy55KSByZXR1cm47XHJcblxyXG4gICAgICAgIHBvcyA9IG5ld1BvcztcclxuICAgICAgICBvbk1vdmUobmV3UG9zKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuZG9tLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG1vdmUpO1xyXG5cclxuICB9O1xyXG5cclxuXHJcblxyXG4gIHRvdWNoKHN0YXJ0RXZlbnQ6IFRvdWNoRXZlbnQsIG9uRG93bikge1xyXG4gICAgbGV0IHBvcyA9IHBvaW50ZXJQb3NpdGlvbihzdGFydEV2ZW50LnRvdWNoZXNbMF0sIHRoaXMuZG9tKTtcclxuICAgIGxldCBvbk1vdmUgPSBvbkRvd24ocG9zKTtcclxuICAgIHN0YXJ0RXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBpZiAoIW9uTW92ZSkgcmV0dXJuO1xyXG5cclxuICAgIGxldCBtb3ZlID0gKG1vdmVFdmVudDogVG91Y2hFdmVudCkgPT4ge1xyXG4gICAgICBsZXQgbmV3UG9zID0gcG9pbnRlclBvc2l0aW9uKG1vdmVFdmVudC50b3VjaGVzWzBdLCB0aGlzLmRvbSk7XHJcblxyXG4gICAgICBpZiAobmV3UG9zLnggPT09IHBvcy54ICYmIG5ld1Bvcy55ID09PSBwb3MueSkgcmV0dXJuO1xyXG4gICAgICBwb3MgPSBuZXdQb3NcclxuICAgICAgb25Nb3ZlKG5ld1Bvcyk7XHJcbiAgICB9O1xyXG4gICAgbGV0IGVuZCA9ICgpID0+IHtcclxuICAgICAgdGhpcy5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgbW92ZSk7XHJcbiAgICAgIHRoaXMuZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZW5kKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmRvbS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBtb3ZlKTtcclxuICAgIHRoaXMuZG9tLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZW5kKTtcclxuICB9O1xyXG59XHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIHBvaW50ZXJQb3NpdGlvbihwb3M6IChNb3VzZUV2ZW50IHwgeyBjbGllbnRYOiBudW1iZXIsIGNsaWVudFk6IG51bWJlciB9KSwgZG9tTm9kZTogSFRNTEVsZW1lbnQpIHtcclxuICBsZXQgcmVjdCA9IGRvbU5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgcmV0dXJuIHtcclxuICAgIHg6IE1hdGguZmxvb3IoKHBvcy5jbGllbnRYIC0gcmVjdC5sZWZ0KSAvIHNjYWxlKSxcclxuICAgIHk6IE1hdGguZmxvb3IoKHBvcy5jbGllbnRZIC0gcmVjdC50b3ApIC8gc2NhbGUpXHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgc2NhbGUgfSBmcm9tICcuLi9jb25zdHMnO1xyXG5pbXBvcnQgeyBQaWN0dXJlIH0gZnJvbSBcIi4uL0NvbXBvbmVudHMvUGljdHVyZVwiXHJcblxyXG5leHBvcnQgY29uc3QgZHJhd1BpY3R1cmUgPSAocGljdHVyZTogUGljdHVyZSwgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgc2NhbGU6IG51bWJlcikgPT4ge1xyXG4gIGNhbnZhcy53aWR0aCA9IHBpY3R1cmUud2lkdGggKiBzY2FsZTtcclxuICBjYW52YXMuaGVpZ2h0ID0gcGljdHVyZS5oZWlnaHQgKiBzY2FsZTtcclxuICBsZXQgY3ggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbiAgZm9yIChsZXQgeSA9IDA7IHkgPCBwaWN0dXJlLmhlaWdodDsgeSsrKSB7XHJcbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHBpY3R1cmUud2lkdGg7IHgrKykge1xyXG4gICAgICBjeC5maWxsU3R5bGUgPSAocGljdHVyZS5waXhlbCh4LCB5KSBhcyBzdHJpbmcpO1xyXG4gICAgICBjeC5maWxsUmVjdCh4ICogc2NhbGUsIHkgKiBzY2FsZSwgc2NhbGUsIHNjYWxlKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJpbXBvcnQgeyBJU3RhdGUsIElDb25maWcsIElQb3MgfSBmcm9tICcuLy4uL3RzL2luZGV4JztcclxuaW1wb3J0IHsgZWx0IH0gZnJvbSAnLi4vdXRpbHMvZWx0JztcclxuaW1wb3J0IHsgUGljdHVyZUNhbnZhcyB9IGZyb20gXCIuL0NhbnZhc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBpeGVsRWRpdG9yIHtcclxuICBzdGF0ZTogSVN0YXRlO1xyXG4gIGNhbnZhczogUGljdHVyZUNhbnZhcztcclxuICBjb250cm9sczogYW55W107XHJcbiAgZG9tOiBIVE1MRWxlbWVudDtcclxuICBjb25zdHJ1Y3RvcihzdGF0ZTogSVN0YXRlLCBjb25maWc6IElDb25maWcpIHtcclxuICAgIGxldCB7IHRvb2xzLCBjb250cm9scywgZGlzcGF0Y2ggfSA9IGNvbmZpZztcclxuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuXHJcbiAgICB0aGlzLmNhbnZhcyA9IG5ldyBQaWN0dXJlQ2FudmFzKHN0YXRlLnBpY3R1cmUsIChwb3M6IElQb3MpID0+IHtcclxuICAgICAgbGV0IHRvb2wgPSB0b29sc1t0aGlzLnN0YXRlLnRvb2xdO1xyXG4gICAgICBsZXQgb25Nb3ZlID0gdG9vbChwb3MsIHRoaXMuc3RhdGUsIGRpc3BhdGNoKTtcclxuXHJcbiAgICAgIGlmIChvbk1vdmUpIHJldHVybiAocG9zOiBJUG9zKSA9PiBvbk1vdmUocG9zLCB0aGlzLnN0YXRlKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5jb250cm9scyA9IGNvbnRyb2xzLm1hcChcclxuICAgICAgQ29udHJvbCA9PiBuZXcgQ29udHJvbChzdGF0ZSwgY29uZmlnKVxyXG4gICAgKTtcclxuICAgIHRoaXMuZG9tID0gZWx0KCdkaXYnLCB7fSwgdGhpcy5jYW52YXMuZG9tLCBlbHQoJ2JyJywge30pLCAuLi50aGlzLmNvbnRyb2xzLnJlZHVjZSgoYSwgYykgPT4gYS5jb25jYXQoJyAnLCBjLmRvbSksIFtdKSk7XHJcbiAgfVxyXG5cclxuICBzeW5jU3RhdGUoc3RhdGU6IElTdGF0ZSkge1xyXG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG4gICAgdGhpcy5jYW52YXMuc3luY1N0YXRlKHN0YXRlLnBpY3R1cmUpO1xyXG4gICAgZm9yIChsZXQgY3RybCBvZiB0aGlzLmNvbnRyb2xzKSBjdHJsLnN5bmNTdGF0ZShzdGF0ZSk7XHJcbiAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgeyB1cGRhdGVTdGF0ZSB9IGZyb20gJy4vc3JjL3N0YXRlL3VwZGF0ZVN0YXRlJztcclxuaW1wb3J0IHsgVG9vbFNlbGVjdCB9IGZyb20gJy4vc3JjL0NvbXBvbmVudHMvVG9vbHMvVG9vbFNlbGVjdCc7XHJcbmltcG9ydCB7IENvbG9yU2VsZWN0IH0gZnJvbSAnLi9zcmMvQ29tcG9uZW50cy9Ub29scy9Db2xvclNlbGVjdCc7XHJcbmltcG9ydCB7IHBpY2sgfSBmcm9tICcuL3NyYy9Db21wb25lbnRzL1Rvb2xzL3BpY2tDb2xvcic7XHJcbmltcG9ydCB7IHJlY3RhbmdsZSB9IGZyb20gJy4vc3JjL0NvbXBvbmVudHMvVG9vbHMvcmVjdGFuZ2xlJztcclxuaW1wb3J0IHsgZmlsbCB9IGZyb20gJy4vc3JjL0NvbXBvbmVudHMvVG9vbHMvZmlsbCc7XHJcbmltcG9ydCB7IGRyYXcgfSBmcm9tICcuL3NyYy9Db21wb25lbnRzL1Rvb2xzL2RyYXcnO1xyXG5pbXBvcnQgeyBQaXhlbEVkaXRvciB9IGZyb20gJy4vc3JjL0NvbXBvbmVudHMvUGl4ZWxFZGl0b3InO1xyXG5pbXBvcnQgeyBQaWN0dXJlIH0gZnJvbSAnLi9zcmMvQ29tcG9uZW50cy9QaWN0dXJlJztcclxuaW1wb3J0IHsgSUFjdGlvbiB9IGZyb20gJy4vc3JjL3RzJztcclxuXHJcbmxldCBzdGF0ZSA9IHtcclxuICB0b29sOiBcImRyYXdcIixcclxuICBjb2xvcjogXCIjMDAwMDAwXCIsXHJcbiAgcGljdHVyZTogUGljdHVyZS5lbXB0eSg2MCwgMzAsIFwiI2YwZjBmMFwiKVxyXG59O1xyXG5sZXQgYXBwID0gbmV3IFBpeGVsRWRpdG9yKHN0YXRlLCB7XHJcbiAgdG9vbHM6IHsgZHJhdywgZmlsbCwgcmVjdGFuZ2xlLCBwaWNrIH0sXHJcbiAgY29udHJvbHM6IFtUb29sU2VsZWN0LCBDb2xvclNlbGVjdF0sXHJcbiAgZGlzcGF0Y2goYWN0aW9uOiBJQWN0aW9uKSB7XHJcbiAgICBzdGF0ZSA9IHVwZGF0ZVN0YXRlKHN0YXRlLCBhY3Rpb24pO1xyXG4gICAgYXBwLnN5bmNTdGF0ZShzdGF0ZSk7XHJcbiAgfVxyXG59KTtcclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImRpdlwiKS5hcHBlbmRDaGlsZChhcHAuZG9tKTsiLCJcclxuaW50ZXJmYWNlIElQaXhlbCB7XHJcbiAgeDogbnVtYmVyO1xyXG4gIHk6IG51bWJlcjtcclxuICBjb2xvcjogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUGljdHVyZSB7XHJcbiAgd2lkdGg6IG51bWJlcjtcclxuICBoZWlnaHQ6IG51bWJlcjtcclxuICBwaXhlbHM6IChJUGl4ZWwgfCBzdHJpbmcpW11cclxuXHJcbiAgY29uc3RydWN0b3Iod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIHBpeGVsczogKElQaXhlbCB8IHN0cmluZylbXSkge1xyXG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB0aGlzLnBpeGVscyA9IHBpeGVscztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBlbXB0eSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgY29sb3I6IHN0cmluZykge1xyXG4gICAgbGV0IHBpeGVscyA9IG5ldyBBcnJheSh3aWR0aCAqIGhlaWdodCkuZmlsbChjb2xvcik7XHJcbiAgICByZXR1cm4gbmV3IFBpY3R1cmUod2lkdGgsIGhlaWdodCwgcGl4ZWxzKTtcclxuICB9XHJcblxyXG4gIHBpeGVsKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gdGhpcy5waXhlbHNbeCArIHkgKiB0aGlzLndpZHRoXTtcclxuICB9XHJcblxyXG4gIGRyYXcocGl4ZWxzOiBJUGl4ZWxbXSkge1xyXG4gICAgbGV0IGNvcHkgPSB0aGlzLnBpeGVscy5zbGljZSgpO1xyXG5cclxuICAgIGZvciAobGV0IHsgeCwgeSwgY29sb3IgfSBvZiBwaXhlbHMpIHtcclxuICAgICAgY29weVt4ICsgeSAqIHRoaXMud2lkdGhdID0gY29sb3I7XHJcblxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBQaWN0dXJlKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCBjb3B5KTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBJU3RhdGUsIElQb3MsIElEaXNwYXRjaCB9IGZyb20gJy4vLi4vLi4vdHMvaW5kZXgnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGRyYXcgPSAocG9zOiBJUG9zLCBzdGF0ZTogSVN0YXRlLCBkaXNwYXRjaDogSURpc3BhdGNoKSA9PiB7XHJcbiAgZnVuY3Rpb24gZHJhd1BpeGVsKHsgeCwgeSB9OiBJUG9zLCBzdGF0ZTogSVN0YXRlKSB7XHJcbiAgICBsZXQgZHJhd24gPSB7IHgsIHksIGNvbG9yOiBzdGF0ZS5jb2xvciB9O1xyXG4gICAgZGlzcGF0Y2goeyBwaWN0dXJlOiBzdGF0ZS5waWN0dXJlLmRyYXcoW2RyYXduXSkgfSk7XHJcbiAgfVxyXG4gIGRyYXdQaXhlbChwb3MsIHN0YXRlKTtcclxuXHJcbiAgcmV0dXJuIGRyYXdQaXhlbDtcclxufSIsImltcG9ydCB7IElTdGF0ZSwgSURpc3BhdGNoLCBJUG9zIH0gZnJvbSAnLi8uLi8uLi90cy9pbmRleCc7XHJcbmltcG9ydCB7IGFyb3VuZCB9IGZyb20gXCIuLi8uLi9jb25zdHNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBmaWxsID0gKHsgeCwgeSB9OiBJUG9zLCBzdGF0ZTogSVN0YXRlLCBkaXNwYXRjaDogSURpc3BhdGNoKSA9PiB7XHJcbiAgbGV0IHRhcmdldENvbG9yID0gc3RhdGUucGljdHVyZS5waXhlbCh4LCB5KTtcclxuICBsZXQgZHJhd24gPSBbeyB4LCB5LCBjb2xvcjogc3RhdGUuY29sb3IgfV07XHJcblxyXG4gIGZvciAobGV0IGRvbmUgPSAwOyBkb25lIDwgZHJhd24ubGVuZ3RoOyBkb25lKyspIHtcclxuICAgIGZvciAoY29uc3QgeyBkeCwgZHkgfSBvZiBhcm91bmQpIHtcclxuICAgICAgbGV0IHggPSBkcmF3bltkb25lXS54ICsgZHg7XHJcbiAgICAgIGxldCB5ID0gZHJhd25bZG9uZV0ueSArIGR5O1xyXG5cclxuICAgICAgaWYgKHggPj0gMCAmJiB4IDwgc3RhdGUucGljdHVyZS53aWR0aCAmJlxyXG4gICAgICAgIHkgPj0gMCAmJiB5IDwgc3RhdGUucGljdHVyZS5oZWlnaHQgJiZcclxuICAgICAgICBzdGF0ZS5waWN0dXJlLnBpeGVsKHgsIHkpID09PSB0YXJnZXRDb2xvciAmJlxyXG4gICAgICAgICFkcmF3bi5zb21lKHAgPT4gcC54ID09PSB4ICYmIHAueSA9PT0geSkpIHtcclxuICAgICAgICBkcmF3bi5wdXNoKHsgeCwgeSwgY29sb3I6IHN0YXRlLmNvbG9yIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIGRpc3BhdGNoKHsgcGljdHVyZTogc3RhdGUucGljdHVyZS5kcmF3KGRyYXduKSB9KTtcclxufSIsIlxyXG5leHBvcnQgY29uc3QgcmVjdGFuZ2xlID0gKHN0YXJ0LCBzdGF0ZSwgZGlzcGF0Y2gpID0+IHtcclxuICBmdW5jdGlvbiBkcmF3UmVjdGFuZ2xlKHBvcykge1xyXG4gICAgbGV0IHhTdGFydCA9IE1hdGgubWluKHN0YXJ0LngsIHBvcy54KTtcclxuICAgIGxldCB5U3RhcnQgPSBNYXRoLm1pbihzdGFydC55LCBwb3MueSk7XHJcbiAgICBsZXQgeEVuZCA9IE1hdGgubWF4KHN0YXJ0LngsIHBvcy54KTtcclxuICAgIGxldCB5RW5kID0gTWF0aC5tYXgoc3RhcnQueSwgcG9zLnkpO1xyXG5cclxuICAgIGxldCBkcmF3biA9IFtdO1xyXG4gICAgZm9yIChsZXQgeSA9IHlTdGFydDsgeSA8PSB5RW5kOyB5KyspIHtcclxuICAgICAgZm9yIChsZXQgeCA9IHhTdGFydDsgeCA8PSB4RW5kOyB4KyspIHtcclxuICAgICAgICBkcmF3bi5wdXNoKHsgeCwgeSwgY29sb3I6IHN0YXRlLmNvbG9yIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGRpc3BhdGNoKHsgcGljdHVyZTogc3RhdGUucGljdHVyZS5kcmF3KGRyYXduKSB9KTtcclxuICB9XHJcbiAgZHJhd1JlY3RhbmdsZShzdGFydCk7XHJcbiAgcmV0dXJuIGRyYXdSZWN0YW5nbGU7XHJcbn0iLCJpbXBvcnQgeyBJUG9zLCBJU3RhdGUsIElEaXNwYXRjaCB9IGZyb20gJy4vLi4vLi4vdHMvaW5kZXgnO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBpY2sgPSAocG9zOiBJUG9zLCBzdGF0ZTogSVN0YXRlLCBkaXNwYXRjaDogSURpc3BhdGNoKSA9PiB7XHJcbiAgZGlzcGF0Y2goeyBjb2xvcjogKHN0YXRlLnBpY3R1cmUucGl4ZWwocG9zLngsIHBvcy55KSBhcyBzdHJpbmcpIH0pO1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==