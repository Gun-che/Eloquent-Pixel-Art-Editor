!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var n=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u};function o(t,e,r){var o,i,u=[];if(Math.abs(t.x-e.x)>Math.abs(t.y-e.y)){t.x>e.x&&(t=(o=n([e,t],2))[0],e=o[1]);for(var a=(e.y-t.y)/(e.x-t.x),c=t.x,l=t.y;c<=e.x;c++)u.push({x:c,y:Math.round(l),color:r}),l+=a}else{t.y>e.y&&(t=(i=n([e,t],2))[0],e=i[1]);for(a=(e.x-t.x)/(e.y-t.y),c=t.x,l=t.y;l<=e.y;l++)u.push({x:Math.round(c),y:l,color:r}),c+=a}return u}var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u=function(t,e){for(var r,n,o=[],u=2;u<arguments.length;u++)o[u-2]=arguments[u];var a=document.createElement(t);e&&Object.assign(a,e);try{for(var c=i(o),l=c.next();!l.done;l=c.next()){var f=l.value;"string"!=typeof f?a.appendChild(f):a.appendChild(document.createTextNode(f))}}catch(t){r={error:t}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return a},a=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},c=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t},l=function(){function t(t,e){var r=e.dispatch;this.dom=u("button",{onclick:function(){return r({undo:!0})},disabled:0===t.done.length},"‚Æ™  –û—Ç–º–µ–Ω–∏—Ç—å")}return t.prototype.syncState=function(t){this.dom.disabled=0===t.done.length},t}(),f=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d=function(){function t(t,e,r){this.width=t,this.height=e,this.pixels=r}return t.empty=function(e,r,n){return new t(e,r,new Array(e*r).fill(n))},t.prototype.pixel=function(t,e){return this.pixels[t+e*this.width]},t.prototype.draw=function(e){var r,n,o=this.pixels.slice();try{for(var i=f(e),u=i.next();!u.done;u=i.next()){var a=u.value,c=a.x,l=a.y,d=a.color;o[c+l*this.width]=d}}catch(t){r={error:t}}finally{try{u&&!u.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return new t(this.width,this.height,o)},t}(),h=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},s=function(){function t(t,e){var r=e.dispatch;this.dom=u("button",{onclick:function(){return function(t){var e=u("input",{type:"file",onchange:function(){return function(t,e){if(null===t)return;var r=new FileReader;r.addEventListener("load",(function(){var t=u("img",{onload:function(){return e({picture:y(t)})},src:r.result})})),r.readAsDataURL(t)}(e.files[0],t)}});document.body.appendChild(e),e.click(),e.remove()}(r)}},"üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å: ")}return t.prototype.syncState=function(){},t}();function y(t){var e=Math.min(100,t.width),r=Math.min(100,t.height),n=u("canvas",{width:e,height:r}).getContext("2d");n.drawImage(t,0,0);var o=[],i=n.getImageData(0,0,e,r).data;function a(t){return t.toString(16).padStart(2,"0")}for(var c=0;c<i.length;c+=4){var l=h(i.slice(c,c+3),3),f=l[0],s=l[1],y=l[2];o.push("#"+a(f)+a(s)+a(y))}return new d(e,r,o)}var p=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},v=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t},m=function(){function t(t,e){var r=this,n=e.tools,o=e.dispatch;this.select=u.apply(void 0,v(["select",{onchange:function(){return o({tool:r.select.value})}}],Object.keys(n).map((function(e){return u("option",{selected:e===t.tool},e)})))),this.dom=u("label",null,"üñå –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç:",this.select)}return t.prototype.syncState=function(t){this.select.value=t.tool},t}(),x=function(){function t(t,e){var r=this,n=e.dispatch;this.input=u("input",{type:"color",value:t.color,onchange:function(){return n({color:r.input.value})}}),this.dom=u("label",null,"üé® –¶–≤–µ—Ç:",this.input)}return t.prototype.syncState=function(t){this.input.value=t.color},t}(),b=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}],w=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},g=function(t,e,r,n){null!=n&&n.width===t.width&&n.height===t.height||(e.width=t.width*r,e.height=t.height*r,n=null);for(var o=e.getContext("2d"),i=0;i<t.height;i++)for(var u=0;u<t.width;u++){var a=t.pixel(u,i);null!==n&&n.pixel(u,i)===a||(o.fillStyle=a,o.fillRect(u*r,i*r,r,r))}},S=function(){function t(t,e){var r=this;this.dom=u("canvas",{onmousedown:function(t){return r.mouse(t,e)},ontouchstart:function(t){return r.touch(t,e)}}),this.syncState(t)}return t.prototype.syncState=function(t){this.picture!==t&&(g(t,this.dom,10,this.picture),this.picture=t)},t.prototype.mouse=function(t,e){var r=this;if(0==t.button){var n=M(t,this.dom),o=e(n);if(o){var i=function(t){if(0==t.buttons)r.dom.removeEventListener("mousemove",i);else{var e=M(t,r.dom);if(e.x==n.x&&e.y==n.y)return;n=e,o(e)}};this.dom.addEventListener("mousemove",i)}}},t.prototype.touch=function(t,e){var r=this,n=M(t.touches[0],this.dom),o=e(n);if(t.preventDefault(),o){var i=function(t){var e=M(t.touches[0],r.dom);e.x===n.x&&e.y===n.y||(n=e,o(e))},u=function(){r.dom.removeEventListener("touchmove",i),r.dom.removeEventListener("touchend",u)};this.dom.addEventListener("touchmove",i),this.dom.addEventListener("touchend",u)}},t}();function M(t,e){var r=e.getBoundingClientRect();return{x:Math.floor((t.clientX-r.left)/10),y:Math.floor((t.clientY-r.top)/10)}}var j=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};var O=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return u},E=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(O(arguments[e]));return t},k=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L=function(){function t(t,e){var r=this,n=e.tools,o=e.controls,i=e.dispatch;this.state=t,this.canvas=new S(t.picture,(function(t){var e=(0,n[r.state.tool])(t,r.state,i);if(e)return function(t){return e(t,r.state)}})),this.controls=o.map((function(r){return new r(t,e)})),this.dom=u.apply(void 0,E(["div",{tabIndex:0},this.canvas.dom,u("br",{})],this.controls.reduce((function(t,e){return t.concat(" ",e.dom)}),[]))),this.dom.addEventListener("keydown",function(t){var e=t.dispatch,r=t.tools;return function(t){var n,o;if(console.log(t.key),"z"===t.key&&(t.metaKey||t.ctrlKey))e({undo:!0}),console.log(r);else if(!t.ctrlKey&&!t.metaKey&&!t.altKey)try{for(var i=j(Object.keys(r)),u=i.next();!u.done;u=i.next()){var a=u.value;if(a[0]===t.key)return t.preventDefault(),void e({tool:a})}}catch(t){n={error:t}}finally{try{u&&!u.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}}}(e))}return t.prototype.syncState=function(t){var e,r;this.state=t,this.canvas.syncState(t.picture);try{for(var n=k(this.controls),o=n.next();!o.done;o=n.next()){o.value.syncState(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t}(),C=function(){function t(t){var e=this;this.picture=t.picture,this.dom=u("button",{onclick:function(){return e.save()}},"üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å: ")}return t.prototype.save=function(){var t=u("canvas",{});g(this.picture,t,1);var e=u("a",{href:t.toDataURL(),download:"pixelart.png"});document.body.appendChild(e),e.click(),e.remove()},t.prototype.syncState=function(t){this.picture=t.picture},t}(),T={tool:"draw",color:"#000000",picture:d.empty(60,30,"#f0f0f0"),done:[],doneAt:0},D={draw:function(t,e,r){function n(e,n){var i=o(t,e,n.color);t=e,r({picture:n.picture.draw(i)})}return n(t,e),n},fill:function(t,e,r){for(var n,o,i=t.x,u=t.y,a=e.picture.pixel(i,u),c=[{x:i,y:u,color:e.color}],l=0;l<c.length;l++){var f=function(t,r){var n=c[l].x+t,o=c[l].y+r;n>=0&&n<e.picture.width&&o>=0&&o<e.picture.height&&e.picture.pixel(n,o)===a&&!c.some((function(t){return t.x===n&&t.y===o}))&&c.push({x:n,y:o,color:e.color})};try{for(var d=(n=void 0,w(b)),h=d.next();!h.done;h=d.next()){var s=h.value;f(s.dx,s.dy)}}catch(t){n={error:t}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}}r({picture:e.picture.draw(c)})},rectangle:function(t,e,r){function n(n){for(var o=Math.min(t.x,n.x),i=Math.min(t.y,n.y),u=Math.max(t.x,n.x),a=Math.max(t.y,n.y),c=[],l=i;l<=a;l++)for(var f=o;f<=u;f++)c.push({x:f,y:l,color:e.color});r({picture:e.picture.draw(c)})}return n(t),n},pick:function(t,e,r){r({color:e.picture.pixel(t.x,t.y)})},circle:function(t,e,r){function n(n){for(var o=Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)),i=Math.ceil(o),u=[],a=-i;a<=i;a++)for(var c=-i;c<=i;c++){if(!(Math.sqrt(Math.pow(c,2)+Math.pow(a,2))>o)){var l=t.y+a,f=t.x+c;l<0||l>=e.picture.height||f<0||f>=e.picture.width||u.push({x:f,y:l,color:e.color})}}r({picture:e.picture.draw(u)})}return n(t),n},line:function(t,e,r){return function(n){var i=o(t,n,e.color);r({picture:e.picture.draw(i)})}}},A=[m,x,C,s,l];document.querySelector("div").appendChild(function(t){t.state;var e=t.tools,r=void 0===e?D:e,n=t.controls,o=new L(T,{tools:r,controls:void 0===n?A:n,dispatch:function(t){T=function(t,e){return!0===e.undo?0===t.done.length?t:Object.assign({},t,{picture:t.done[0],done:t.done.slice(1),doneAt:0}):e.picture&&t.doneAt<Date.now()-1e3?Object.assign({},t,e,{done:c([t.picture],t.done),doneAt:Date.now()}):Object.assign({},t,e)}(T,t),o.syncState(T)}});return o.dom}({}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvVG9vbHMvbGluZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMvZWx0LnRzIiwid2VicGFjazovLy8uL3NyYy9oaXN0b3J5L2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL1BpY3R1cmUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1NhdmVBbmRMb2FkL0xvYWQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvVG9vbHMvVG9vbFNlbGVjdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9Ub29scy9Db2xvclNlbGVjdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29uc3RzLnRzIiwid2VicGFjazovLy8uL3NyYy91dGlscy9kcmF3UGljdHVyZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9DYW52YXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvUGl4ZWxFZGl0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL2tleUxpc3RlbmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9TYXZlQW5kTG9hZC9TYXZlLnRzIiwid2VicGFjazovLy8uL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL1Rvb2xzL2RyYXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvVG9vbHMvZmlsbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQ29tcG9uZW50cy9Ub29scy9yZWN0YW5nbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudHMvVG9vbHMvcGlja0NvbG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnRzL1Rvb2xzL2NpcmNsZS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImRyYXdMaW5lIiwiZnJvbSIsInRvIiwiY29sb3IiLCJwb2ludHMiLCJNYXRoIiwiYWJzIiwieCIsInkiLCJzbG9wZSIsInB1c2giLCJyb3VuZCIsImVsdCIsInR5cGUiLCJwcm9wcyIsImRvbSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImFzc2lnbiIsImNoaWxkcmVuIiwiY2hpbGQiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwic3RhdGUiLCJkaXNwYXRjaCIsInRoaXMiLCJvbmNsaWNrIiwidW5kbyIsImRpc2FibGVkIiwiZG9uZSIsImxlbmd0aCIsInN5bmNTdGF0ZSIsIndpZHRoIiwiaGVpZ2h0IiwicGl4ZWxzIiwiZW1wdHkiLCJQaWN0dXJlIiwiQXJyYXkiLCJmaWxsIiwicGl4ZWwiLCJkcmF3IiwiY29weSIsInNsaWNlIiwiXyIsImlucHV0Iiwib25jaGFuZ2UiLCJmaWxlIiwiZGlzcGFjdGgiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImltYWdlIiwib25sb2FkIiwicGljdHVyZSIsInBpY3R1cmVGcm9tSW1hZ2UiLCJzcmMiLCJyZXN1bHQiLCJyZWFkQXNEYXRhVVJMIiwiZmluaXNoTG9hZCIsImZpbGVzIiwiYm9keSIsImNsaWNrIiwicmVtb3ZlIiwic3RhcnRMb2FkIiwibWluIiwiY3giLCJnZXRDb250ZXh0IiwiZHJhd0ltYWdlIiwiZGF0YSIsImdldEltYWdlRGF0YSIsImhleCIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJnIiwiYiIsInRvb2xzIiwic2VsZWN0IiwidG9vbCIsImtleXMiLCJtYXAiLCJzZWxlY3RlZCIsImFyb3VuZCIsImR4IiwiZHkiLCJkcmF3UGljdHVyZSIsImNhbnZhcyIsInNjYWxlIiwicHJldmlvcyIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwicG9pbnRlckRvd24iLCJvbm1vdXNlZG93biIsImV2ZW50IiwibW91c2UiLCJvbnRvdWNoc3RhcnQiLCJ0b3VjaCIsImRvd25FdmVudCIsIm9uRG93biIsImJ1dHRvbiIsInBvcyIsInBvaW50ZXJQb3NpdGlvbiIsIm9uTW92ZSIsIm1vdmUiLCJtb3ZlRXZlbnQiLCJidXR0b25zIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm5ld1BvcyIsInN0YXJ0RXZlbnQiLCJ0b3VjaGVzIiwicHJldmVudERlZmF1bHQiLCJlbmQiLCJkb21Ob2RlIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImZsb29yIiwiY2xpZW50WCIsImxlZnQiLCJjbGllbnRZIiwidG9wIiwiY29uZmlnIiwiY29udHJvbHMiLCJDb250cm9sIiwidGFiSW5kZXgiLCJyZWR1Y2UiLCJhIiwiY29uY2F0IiwiZSIsImNvbnNvbGUiLCJsb2ciLCJtZXRhS2V5IiwiY3RybEtleSIsImFsdEtleSIsImtleURvd24iLCJzYXZlIiwibGluayIsImhyZWYiLCJ0b0RhdGFVUkwiLCJkb3dubG9hZCIsImRvbmVBdCIsImJhc2VUb29scyIsImNvbm5lY3QiLCJsaW5lIiwidGFyZ2V0Q29sb3IiLCJkcmF3biIsInNvbWUiLCJyZWN0YW5nbGUiLCJzdGFydCIsImRyYXdSZWN0YW5nbGUiLCJ4U3RhcnQiLCJ5U3RhcnQiLCJ4RW5kIiwibWF4IiwieUVuZCIsInBpY2siLCJjaXJjbGUiLCJkcmF3Q2lyY2xlIiwicmFkaXVzIiwic3FydCIsInBvdyIsInJhZGl1c0MiLCJjZWlsIiwiYmFzZUNvbnRyb2xzIiwicXVlcnlTZWxlY3RvciIsImFwcCIsImFjdGlvbiIsIkRhdGUiLCJub3ciLCJoaXN0b3J5VXBkYXRlU3RhdGUiLCJzdGFydFBpeGVsRWRpdG9yIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIsR0FGQTFCLEVBQW9Ca0IsRUFBRU8sR0FDdEJYLE9BQU9DLGVBQWVVLEVBQUksVUFBVyxDQUFFVCxZQUFZLEVBQU1LLE1BQU9BLElBQ3RELEVBQVBFLEdBQTRCLGlCQUFURixF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QVk5QixFQUFNTSxNQUMvQjZHLE9BQVEyQixLQUFLQyxRQUlQNUwsT0FBT3dDLE9BQU8sR0FBSUssRUFBTzZJLEdXY3BCRyxDQUFtQixFQUFPSCxHQUNsQ0QsRUFBSXBJLFVBQVUsTUFJbEIsT0FBT29JLEVBQUlwSixJQUc2QnlKLENBQWlCIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCB7IElQb3MsIElTdGF0ZSwgSURpc3BhdGNoIH0gZnJvbSAnLi8uLi8uLi90cy9pbmRleCc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZHJhd0xpbmUoZnJvbTogSVBvcywgdG86IElQb3MsIGNvbG9yOiBzdHJpbmcpIHtcclxuXHJcbiAgbGV0IHBvaW50cyA9IFtdO1xyXG5cclxuICBpZiAoTWF0aC5hYnMoZnJvbS54IC0gdG8ueCkgPiBNYXRoLmFicyhmcm9tLnkgLSB0by55KSkge1xyXG5cclxuICAgIGlmIChmcm9tLnggPiB0by54KSB7XHJcbiAgICAgIFtmcm9tLCB0b10gPSBbdG8sIGZyb21dO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzbG9wZSA9ICh0by55IC0gZnJvbS55KSAvICh0by54IC0gZnJvbS54KTtcclxuXHJcbiAgICBmb3IgKGxldCB7IHgsIHkgfSA9IGZyb207IHggPD0gdG8ueDsgeCsrKSB7XHJcbiAgICAgIHBvaW50cy5wdXNoKHsgeCwgeTogTWF0aC5yb3VuZCh5KSwgY29sb3IgfSk7XHJcbiAgICAgIHkgKz0gc2xvcGU7XHJcbiAgICB9XHJcblxyXG4gIH0gZWxzZSB7XHJcblxyXG4gICAgaWYgKGZyb20ueSA+IHRvLnkpIHtcclxuICAgICAgW2Zyb20sIHRvXSA9IFt0bywgZnJvbV07XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHNsb3BlID0gKHRvLnggLSBmcm9tLngpIC8gKHRvLnkgLSBmcm9tLnkpO1xyXG5cclxuICAgIGZvciAobGV0IHsgeCwgeSB9ID0gZnJvbTsgeSA8PSB0by55OyB5KyspIHtcclxuICAgICAgcG9pbnRzLnB1c2goeyB4OiBNYXRoLnJvdW5kKHgpLCB5LCBjb2xvciB9KTtcclxuICAgICAgeCArPSBzbG9wZTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHBvaW50cztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGxpbmUgPSAocG9zOiBJUG9zLCBzdGF0ZTogSVN0YXRlLCBkaXNwYXRjaDogSURpc3BhdGNoKSA9PiB7XHJcbiAgcmV0dXJuIChlbmQ6IElQb3MpID0+IHtcclxuICAgIGxldCBsaW5lID0gZHJhd0xpbmUocG9zLCBlbmQsIHN0YXRlLmNvbG9yKTtcclxuICAgIGRpc3BhdGNoKHsgcGljdHVyZTogc3RhdGUucGljdHVyZS5kcmF3KGxpbmUpIH0pXHJcbiAgfVxyXG59IiwiZXhwb3J0IGNvbnN0IGVsdCA9ICh0eXBlOiBzdHJpbmcsIHByb3BzOiBhbnksIC4uLmNoaWxkcmVuOiAoc3RyaW5nIHwgSFRNTEVsZW1lbnQpW10pID0+IHtcclxuICBsZXQgZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcclxuXHJcbiAgaWYgKHByb3BzKSBPYmplY3QuYXNzaWduKGRvbSwgcHJvcHMpO1xyXG5cclxuICBmb3IgKGxldCBjaGlsZCBvZiBjaGlsZHJlbikge1xyXG5cclxuICAgIGlmICh0eXBlb2YgY2hpbGQgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIGRvbS5hcHBlbmRDaGlsZChjaGlsZCk7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZG9tLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNoaWxkKSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBkb207XHJcbn0iLCJpbXBvcnQgeyBlbHQgfSBmcm9tICcuLi91dGlscy9lbHQnO1xyXG5pbXBvcnQgeyBJU3RhdGUsIElBY3Rpb24sIElDb25maWcgfSBmcm9tICcuLi90cy9pbmRleCc7XHJcblxyXG5leHBvcnQgY29uc3QgaGlzdG9yeVVwZGF0ZVN0YXRlID0gKHN0YXRlOiBJU3RhdGUsIGFjdGlvbjogSUFjdGlvbikgPT4ge1xyXG5cclxuXHRpZiAoYWN0aW9uLnVuZG8gPT09IHRydWUpIHtcclxuXHJcblx0XHRpZiAoc3RhdGUuZG9uZS5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0cmV0dXJuIHN0YXRlO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLCB7XHJcblx0XHRcdHBpY3R1cmU6IHN0YXRlLmRvbmVbMF0sXHJcblx0XHRcdGRvbmU6IHN0YXRlLmRvbmUuc2xpY2UoMSksXHJcblx0XHRcdGRvbmVBdDogMCxcclxuXHRcdH0pO1xyXG5cclxuXHR9IGVsc2UgaWYgKGFjdGlvbi5waWN0dXJlICYmIHN0YXRlLmRvbmVBdCA8IERhdGUubm93KCkgLSAxMDAwKSB7XHJcblx0XHRyZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUsIGFjdGlvbiwge1xyXG5cdFx0XHRkb25lOiBbc3RhdGUucGljdHVyZSwgLi4uc3RhdGUuZG9uZV0sXHJcblx0XHRcdGRvbmVBdDogRGF0ZS5ub3coKSxcclxuXHRcdH0pO1xyXG5cclxuXHR9IGVsc2Uge1xyXG5cdFx0cmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLCBhY3Rpb24pO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFVuZG9CdXR0b24ge1xyXG5cdGRvbTogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHN0YXRlOiBJU3RhdGUsIHsgZGlzcGF0Y2ggfTogSUNvbmZpZykge1xyXG5cdFx0dGhpcy5kb20gPSBlbHQoJ2J1dHRvbicsIHtcclxuXHRcdFx0b25jbGljazogKCkgPT4gZGlzcGF0Y2goeyB1bmRvOiB0cnVlIH0pLFxyXG5cdFx0XHRkaXNhYmxlZDogc3RhdGUuZG9uZS5sZW5ndGggPT09IDBcclxuXHRcdH0sICfirqogINCe0YLQvNC10L3QuNGC0YwnKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHR9XHJcblxyXG5cdHN5bmNTdGF0ZShzdGF0ZTogSVN0YXRlKSB7XHJcblx0XHR0aGlzLmRvbS5kaXNhYmxlZCA9IHN0YXRlLmRvbmUubGVuZ3RoID09PSAwO1xyXG5cdH1cclxufSIsImltcG9ydCB7IElQaXhlbCB9IGZyb20gJy4vLi4vdHMvaW5kZXgnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBpY3R1cmUge1xyXG4gIHdpZHRoOiBudW1iZXI7XHJcbiAgaGVpZ2h0OiBudW1iZXI7XHJcbiAgcGl4ZWxzOiBzdHJpbmdbXVxyXG5cclxuICBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgcGl4ZWxzOiBzdHJpbmdbXSkge1xyXG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB0aGlzLnBpeGVscyA9IHBpeGVscztcclxuICB9XHJcblxyXG4gIHN0YXRpYyBlbXB0eSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgY29sb3I6IHN0cmluZykge1xyXG4gICAgbGV0IHBpeGVscyA9IG5ldyBBcnJheSh3aWR0aCAqIGhlaWdodCkuZmlsbChjb2xvcik7XHJcbiAgICByZXR1cm4gbmV3IFBpY3R1cmUod2lkdGgsIGhlaWdodCwgcGl4ZWxzKTtcclxuICB9XHJcblxyXG4gIHBpeGVsKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gdGhpcy5waXhlbHNbeCArIHkgKiB0aGlzLndpZHRoXTtcclxuICB9XHJcblxyXG4gIGRyYXcocGl4ZWxzOiBJUGl4ZWxbXSkge1xyXG4gICAgbGV0IGNvcHkgPSB0aGlzLnBpeGVscy5zbGljZSgpO1xyXG5cclxuICAgIGZvciAobGV0IHsgeCwgeSwgY29sb3IgfSBvZiBwaXhlbHMpIHtcclxuICAgICAgY29weVt4ICsgeSAqIHRoaXMud2lkdGhdID0gY29sb3I7XHJcblxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBQaWN0dXJlKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCBjb3B5KTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBQaWN0dXJlIH0gZnJvbSAnLi8uLi9Db21wb25lbnRzL1BpY3R1cmUnO1xyXG5pbXBvcnQgeyBlbHQgfSBmcm9tICcuLy4uL3V0aWxzL2VsdCc7XHJcbmltcG9ydCB7IElDb25maWcsIElEaXNwYXRjaCB9IGZyb20gJy4vLi4vdHMvaW5kZXgnO1xyXG5cclxuZXhwb3J0IGNsYXNzIExvYWRCdXR0b24ge1xyXG4gIGRvbTogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgY29uc3RydWN0b3IoXzogYW55LCB7IGRpc3BhdGNoIH06IElDb25maWcpIHtcclxuICAgIHRoaXMuZG9tID0gZWx0KCdidXR0b24nLCB7XHJcbiAgICAgIG9uY2xpY2s6ICgpID0+IHN0YXJ0TG9hZChkaXNwYXRjaCksXHJcbiAgICB9LCAn8J+TgSDQl9Cw0LPRgNGD0LfQuNGC0Yw6ICcpIGFzIEhUTUxCdXR0b25FbGVtZW50XHJcbiAgfVxyXG5cclxuICBzeW5jU3RhdGUoKSB7IH1cclxufVxyXG5cclxuZnVuY3Rpb24gc3RhcnRMb2FkKGRpc3BhdGNoOiBJRGlzcGF0Y2gpIHtcclxuICBsZXQgaW5wdXQgPSBlbHQoJ2lucHV0Jywge1xyXG4gICAgdHlwZTogJ2ZpbGUnLFxyXG4gICAgb25jaGFuZ2U6ICgpID0+IGZpbmlzaExvYWQoaW5wdXQuZmlsZXNbMF0sIGRpc3BhdGNoKVxyXG4gIH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpbnB1dCk7XHJcbiAgaW5wdXQuY2xpY2soKTtcclxuICBpbnB1dC5yZW1vdmUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZmluaXNoTG9hZChmaWxlOiBGaWxlLCBkaXNwYWN0aDogSURpc3BhdGNoKSB7XHJcblxyXG4gIGlmIChmaWxlID09PSBudWxsKSByZXR1cm47XHJcblxyXG4gIGxldCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gIHJlYWRlci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xyXG4gICAgbGV0IGltYWdlID0gZWx0KCdpbWcnLCB7XHJcbiAgICAgIG9ubG9hZDogKCkgPT4gZGlzcGFjdGgoe1xyXG4gICAgICAgIHBpY3R1cmU6IHBpY3R1cmVGcm9tSW1hZ2UoaW1hZ2UpXHJcbiAgICAgIH0pLFxyXG4gICAgICBzcmM6IHJlYWRlci5yZXN1bHRcclxuICAgIH0pIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XHJcbiAgfSk7XHJcbiAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSlcclxufVxyXG5cclxuZnVuY3Rpb24gcGljdHVyZUZyb21JbWFnZShpbWFnZTogSFRNTEltYWdlRWxlbWVudCkge1xyXG4gIGxldCB3aWR0aCA9IE1hdGgubWluKDEwMCwgaW1hZ2Uud2lkdGgpO1xyXG4gIGxldCBoZWlnaHQgPSBNYXRoLm1pbigxMDAsIGltYWdlLmhlaWdodCk7XHJcblxyXG4gIGxldCBjYW52YXMgPSBlbHQoJ2NhbnZhcycsIHsgd2lkdGgsIGhlaWdodCB9KSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcclxuXHJcbiAgbGV0IGN4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgY3guZHJhd0ltYWdlKGltYWdlLCAwLCAwKTtcclxuICBsZXQgcGl4ZWxzID0gW107XHJcbiAgbGV0IHsgZGF0YSB9ID0gY3guZ2V0SW1hZ2VEYXRhKDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xyXG5cclxuICBmdW5jdGlvbiBoZXgobjogbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gbi50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKTtcclxuICB9XHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkgKz0gNCkge1xyXG4gICAgbGV0IFtyLCBnLCBiXSA9IGRhdGEuc2xpY2UoaSwgaSArIDMpO1xyXG4gICAgcGl4ZWxzLnB1c2goJyMnICsgaGV4KHIpICsgaGV4KGcpICsgaGV4KGIpKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBuZXcgUGljdHVyZSh3aWR0aCwgaGVpZ2h0LCBwaXhlbHMpO1xyXG59IiwiaW1wb3J0IHsgSVN0YXRlLCBJQ29uZmlnIH0gZnJvbSAnLi8uLi8uLi90cy9pbmRleCc7XHJcbmltcG9ydCB7IGVsdCB9IGZyb20gJy4vLi4vLi4vdXRpbHMvZWx0JztcclxuXHJcbmV4cG9ydCBjbGFzcyBUb29sU2VsZWN0IHtcclxuICBzZWxlY3Q6IEhUTUxTZWxlY3RFbGVtZW50O1xyXG4gIGRvbTogSFRNTEVsZW1lbnQ7XHJcbiAgY29uc3RydWN0b3Ioc3RhdGU6IElTdGF0ZSwgeyB0b29scywgZGlzcGF0Y2ggfTogSUNvbmZpZykge1xyXG4gICAgdGhpcy5zZWxlY3QgPSAoZWx0KCdzZWxlY3QnLCB7XHJcbiAgICAgIG9uY2hhbmdlOiAoKSA9PiBkaXNwYXRjaCh7IHRvb2w6IHRoaXMuc2VsZWN0LnZhbHVlIH0pXHJcbiAgICB9LCAuLi5PYmplY3Qua2V5cyh0b29scykubWFwKG5hbWUgPT4gZWx0KCdvcHRpb24nLCB7XHJcbiAgICAgIHNlbGVjdGVkOiBuYW1lID09PSBzdGF0ZS50b29sXHJcbiAgICB9LCBuYW1lKSkpIGFzIEhUTUxTZWxlY3RFbGVtZW50KTtcclxuICAgIHRoaXMuZG9tID0gZWx0KCdsYWJlbCcsIG51bGwsICfwn5aMINCY0L3RgdGC0YDRg9C80LXQvdGCOicsIHRoaXMuc2VsZWN0KTtcclxuICB9XHJcblxyXG4gIHN5bmNTdGF0ZShzdGF0ZTogSVN0YXRlKSB7XHJcbiAgICB0aGlzLnNlbGVjdC52YWx1ZSA9IHN0YXRlLnRvb2w7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IElTdGF0ZSwgSURpc3BhdGNoLCBJQ29uZmlnIH0gZnJvbSAnLi8uLi8uLi90cy9pbmRleCc7XHJcbmltcG9ydCB7IGVsdCB9IGZyb20gJy4vLi4vLi4vdXRpbHMvZWx0JztcclxuXHJcbmV4cG9ydCBjbGFzcyBDb2xvclNlbGVjdCB7XHJcbiAgaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgZG9tOiBIVE1MRWxlbWVudDtcclxuICBjb25zdHJ1Y3RvcihzdGF0ZTogSVN0YXRlLCB7IGRpc3BhdGNoIH06IElDb25maWcpIHtcclxuICAgIHRoaXMuaW5wdXQgPSAoZWx0KCdpbnB1dCcsIHtcclxuICAgICAgdHlwZTogJ2NvbG9yJyxcclxuICAgICAgdmFsdWU6IHN0YXRlLmNvbG9yLFxyXG4gICAgICBvbmNoYW5nZTogKCkgPT4gZGlzcGF0Y2goeyBjb2xvcjogdGhpcy5pbnB1dC52YWx1ZSB9KVxyXG4gICAgfSkgYXMgSFRNTElucHV0RWxlbWVudCk7XHJcbiAgICB0aGlzLmRvbSA9IGVsdCgnbGFiZWwnLCBudWxsLCAn8J+OqCDQptCy0LXRgjonLCB0aGlzLmlucHV0KVxyXG4gIH1cclxuXHJcbiAgc3luY1N0YXRlKHN0YXRlOiBJU3RhdGUpOiB2b2lkIHtcclxuICAgIHRoaXMuaW5wdXQudmFsdWUgPSBzdGF0ZS5jb2xvcjtcclxuICB9XHJcbn0iLCJleHBvcnQgY29uc3Qgc2NhbGUgPSAxMDtcclxuXHJcbmV4cG9ydCBjb25zdCBhcm91bmQgPSBbeyBkeDogLTEsIGR5OiAwIH0sIHsgZHg6IDEsIGR5OiAwIH0sIHsgZHg6IDAsIGR5OiAtMSB9LCB7IGR4OiAwLCBkeTogMSB9LF1cclxuIiwiaW1wb3J0IHsgUGljdHVyZSB9IGZyb20gXCIuLi9Db21wb25lbnRzL1BpY3R1cmVcIlxyXG5cclxuZXhwb3J0IGNvbnN0IGRyYXdQaWN0dXJlID0gKHBpY3R1cmU6IFBpY3R1cmUsIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsIHNjYWxlOiBudW1iZXIsIHByZXZpb3M/OiBQaWN0dXJlKSA9PiB7XHJcblxyXG4gIGlmIChwcmV2aW9zID09IG51bGwgfHxcclxuICAgIHByZXZpb3Mud2lkdGggIT09IHBpY3R1cmUud2lkdGggfHxcclxuICAgIHByZXZpb3MuaGVpZ2h0ICE9PSBwaWN0dXJlLmhlaWdodCkge1xyXG4gICAgY2FudmFzLndpZHRoID0gcGljdHVyZS53aWR0aCAqIHNjYWxlO1xyXG4gICAgY2FudmFzLmhlaWdodCA9IHBpY3R1cmUuaGVpZ2h0ICogc2NhbGU7XHJcbiAgICBwcmV2aW9zID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGxldCBjeCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuICBmb3IgKGxldCB5ID0gMDsgeSA8IHBpY3R1cmUuaGVpZ2h0OyB5KyspIHtcclxuICAgIGZvciAobGV0IHggPSAwOyB4IDwgcGljdHVyZS53aWR0aDsgeCsrKSB7XHJcblxyXG4gICAgICBsZXQgY29sb3IgPSBwaWN0dXJlLnBpeGVsKHgsIHkpO1xyXG4gICAgICBpZiAocHJldmlvcyA9PT0gbnVsbCB8fCBwcmV2aW9zLnBpeGVsKHgsIHkpICE9PSBjb2xvcikge1xyXG5cclxuICAgICAgICBjeC5maWxsU3R5bGUgPSBjb2xvcjtcclxuICAgICAgICBjeC5maWxsUmVjdCh4ICogc2NhbGUsIHkgKiBzY2FsZSwgc2NhbGUsIHNjYWxlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufSIsImltcG9ydCB7IHNjYWxlIH0gZnJvbSAnLi8uLi9jb25zdHMnO1xyXG5pbXBvcnQgeyBJUG9zIH0gZnJvbSAnLi8uLi90cy9pbmRleCc7XHJcbmltcG9ydCB7IGVsdCB9IGZyb20gJy4uL3V0aWxzL2VsdCc7XHJcbmltcG9ydCB7IFBpY3R1cmUgfSBmcm9tICcuL1BpY3R1cmUnO1xyXG5pbXBvcnQgeyBkcmF3UGljdHVyZSB9IGZyb20gJy4uL3V0aWxzL2RyYXdQaWN0dXJlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQaWN0dXJlQ2FudmFzIHtcclxuICBkb206IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gIHBpY3R1cmU6IFBpY3R1cmU7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBpY3R1cmU6IFBpY3R1cmUsIHBvaW50ZXJEb3duOiAocG9zOiBJUG9zKSA9PiB2b2lkKSB7XHJcbiAgICB0aGlzLmRvbSA9IGVsdCgnY2FudmFzJywge1xyXG4gICAgICBvbm1vdXNlZG93bjogKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB0aGlzLm1vdXNlKGV2ZW50LCBwb2ludGVyRG93biksXHJcbiAgICAgIG9udG91Y2hzdGFydDogKGV2ZW50OiBUb3VjaEV2ZW50KSA9PiB0aGlzLnRvdWNoKGV2ZW50LCBwb2ludGVyRG93bilcclxuICAgIH0pIGFzIEhUTUxDYW52YXNFbGVtZW50O1xyXG5cclxuICAgIHRoaXMuc3luY1N0YXRlKHBpY3R1cmUpO1xyXG4gIH1cclxuXHJcbiAgc3luY1N0YXRlKHBpY3R1cmU6IFBpY3R1cmUpIHtcclxuICAgIGlmICh0aGlzLnBpY3R1cmUgPT09IHBpY3R1cmUpIHJldHVybjtcclxuICAgIGRyYXdQaWN0dXJlKHBpY3R1cmUsIHRoaXMuZG9tLCBzY2FsZSwgdGhpcy5waWN0dXJlKTtcclxuICAgIHRoaXMucGljdHVyZSA9IHBpY3R1cmU7XHJcbiAgfVxyXG5cclxuICBtb3VzZShkb3duRXZlbnQ6IE1vdXNlRXZlbnQsIG9uRG93bjogKHBvczogSVBvcykgPT4gYW55KSB7XHJcblxyXG4gICAgaWYgKGRvd25FdmVudC5idXR0b24gIT0gMCkgcmV0dXJuO1xyXG5cclxuICAgIGxldCBwb3MgPSBwb2ludGVyUG9zaXRpb24oZG93bkV2ZW50LCB0aGlzLmRvbSk7XHJcbiAgICBsZXQgb25Nb3ZlID0gb25Eb3duKHBvcyk7XHJcblxyXG4gICAgaWYgKCFvbk1vdmUpIHJldHVybjtcclxuXHJcbiAgICBsZXQgbW92ZSA9IChtb3ZlRXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuXHJcbiAgICAgIGlmIChtb3ZlRXZlbnQuYnV0dG9ucyA9PSAwKSB7XHJcbiAgICAgICAgdGhpcy5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBtb3ZlKTtcclxuXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGV0IG5ld1BvcyA9IHBvaW50ZXJQb3NpdGlvbihtb3ZlRXZlbnQsIHRoaXMuZG9tKTtcclxuXHJcbiAgICAgICAgaWYgKG5ld1Bvcy54ID09IHBvcy54ICYmIG5ld1Bvcy55ID09IHBvcy55KSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBvcyA9IG5ld1BvcztcclxuICAgICAgICBvbk1vdmUobmV3UG9zKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuZG9tLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbW92ZSk7XHJcblxyXG4gIH07XHJcblxyXG5cclxuXHJcbiAgdG91Y2goc3RhcnRFdmVudDogVG91Y2hFdmVudCwgb25Eb3duOiAocG9zOiBJUG9zKSA9PiBhbnkpIHtcclxuICAgIGxldCBwb3MgPSBwb2ludGVyUG9zaXRpb24oc3RhcnRFdmVudC50b3VjaGVzWzBdLCB0aGlzLmRvbSk7XHJcbiAgICBsZXQgb25Nb3ZlID0gb25Eb3duKHBvcyk7XHJcbiAgICBzdGFydEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYgKCFvbk1vdmUpIHJldHVybjtcclxuXHJcbiAgICBsZXQgbW92ZSA9IChtb3ZlRXZlbnQ6IFRvdWNoRXZlbnQpID0+IHtcclxuICAgICAgbGV0IG5ld1BvcyA9IHBvaW50ZXJQb3NpdGlvbihtb3ZlRXZlbnQudG91Y2hlc1swXSwgdGhpcy5kb20pO1xyXG5cclxuICAgICAgaWYgKG5ld1Bvcy54ID09PSBwb3MueCAmJiBuZXdQb3MueSA9PT0gcG9zLnkpIHJldHVybjtcclxuICAgICAgcG9zID0gbmV3UG9zXHJcbiAgICAgIG9uTW92ZShuZXdQb3MpO1xyXG4gICAgfTtcclxuICAgIGxldCBlbmQgPSAoKSA9PiB7XHJcbiAgICAgIHRoaXMuZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG1vdmUpO1xyXG4gICAgICB0aGlzLmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGVuZCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5kb20uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgbW92ZSk7XHJcbiAgICB0aGlzLmRvbS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGVuZCk7XHJcbiAgfTtcclxufVxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBwb2ludGVyUG9zaXRpb24ocG9zOiAoTW91c2VFdmVudCB8IHsgY2xpZW50WDogbnVtYmVyLCBjbGllbnRZOiBudW1iZXIgfSksIGRvbU5vZGU6IEhUTUxFbGVtZW50KSB7XHJcbiAgbGV0IHJlY3QgPSBkb21Ob2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gIHJldHVybiAoe1xyXG4gICAgeDogTWF0aC5mbG9vcigocG9zLmNsaWVudFggLSByZWN0LmxlZnQpIC8gc2NhbGUpLFxyXG4gICAgeTogTWF0aC5mbG9vcigocG9zLmNsaWVudFkgLSByZWN0LnRvcCkgLyBzY2FsZSlcclxuICB9KVxyXG59IiwiaW1wb3J0IHsgSVN0YXRlLCBJQ29uZmlnLCBJUG9zIH0gZnJvbSAnLi8uLi90cy9pbmRleCc7XHJcbmltcG9ydCB7IGVsdCB9IGZyb20gJy4uL3V0aWxzL2VsdCc7XHJcbmltcG9ydCB7IFBpY3R1cmVDYW52YXMgfSBmcm9tIFwiLi9DYW52YXNcIjtcclxuaW1wb3J0IHsga2V5RG93biB9IGZyb20gJy4uL3V0aWxzL2tleUxpc3RlbmVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQaXhlbEVkaXRvciB7XHJcbiAgc3RhdGU6IElTdGF0ZTtcclxuICBjYW52YXM6IFBpY3R1cmVDYW52YXM7XHJcbiAgY29udHJvbHM6IGFueVtdO1xyXG4gIGRvbTogSFRNTEVsZW1lbnQ7XHJcbiAgY29uc3RydWN0b3Ioc3RhdGU6IElTdGF0ZSwgY29uZmlnOiBJQ29uZmlnKSB7XHJcbiAgICBsZXQgeyB0b29scywgY29udHJvbHMsIGRpc3BhdGNoIH0gPSBjb25maWc7XHJcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XHJcblxyXG4gICAgdGhpcy5jYW52YXMgPSBuZXcgUGljdHVyZUNhbnZhcyhzdGF0ZS5waWN0dXJlLCAocG9zOiBJUG9zKSA9PiB7XHJcbiAgICAgIGxldCB0b29sID0gdG9vbHNbdGhpcy5zdGF0ZS50b29sXTtcclxuICAgICAgbGV0IG9uTW92ZSA9IHRvb2wocG9zLCB0aGlzLnN0YXRlLCBkaXNwYXRjaCk7XHJcblxyXG4gICAgICBpZiAob25Nb3ZlKSB7XHJcbiAgICAgICAgcmV0dXJuIChwb3M6IElQb3MpID0+IG9uTW92ZShwb3MsIHRoaXMuc3RhdGUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHRoaXMuY29udHJvbHMgPSBjb250cm9scy5tYXAoXHJcbiAgICAgIENvbnRyb2wgPT4gbmV3IENvbnRyb2woc3RhdGUsIGNvbmZpZylcclxuICAgICk7XHJcbiAgICB0aGlzLmRvbSA9IGVsdCgnZGl2JywgeyB0YWJJbmRleDogMCB9LCB0aGlzLmNhbnZhcy5kb20sIGVsdCgnYnInLCB7fSksIC4uLnRoaXMuY29udHJvbHMucmVkdWNlKChhLCBjKSA9PiBhLmNvbmNhdCgnICcsIGMuZG9tKSwgW10pKTtcclxuXHJcbiAgICB0aGlzLmRvbS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywga2V5RG93bihjb25maWcpKVxyXG4gIH1cclxuXHJcbiAgc3luY1N0YXRlKHN0YXRlOiBJU3RhdGUpIHtcclxuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuICAgIHRoaXMuY2FudmFzLnN5bmNTdGF0ZShzdGF0ZS5waWN0dXJlKTtcclxuICAgIGZvciAobGV0IGN0cmwgb2YgdGhpcy5jb250cm9scykgY3RybC5zeW5jU3RhdGUoc3RhdGUpO1xyXG4gIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgSUNvbmZpZyB9IGZyb20gJy4uL3RzL2luZGV4JztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBrZXlEb3duKHsgZGlzcGF0Y2gsIHRvb2xzIH06IElDb25maWcpIHtcclxuICByZXR1cm4gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGUua2V5KVxyXG4gICAgaWYgKGUua2V5ID09PSAneicgJiYgKGUubWV0YUtleSB8fCBlLmN0cmxLZXkpKSB7XHJcbiAgICAgIGRpc3BhdGNoKHsgdW5kbzogdHJ1ZSB9KVxyXG4gICAgICBjb25zb2xlLmxvZyh0b29scylcclxuXHJcbiAgICB9IGVsc2UgaWYgKCFlLmN0cmxLZXkgJiYgIWUubWV0YUtleSAmJiAhZS5hbHRLZXkpIHtcclxuICAgICAgZm9yIChjb25zdCB0b29sIG9mIE9iamVjdC5rZXlzKHRvb2xzKSkge1xyXG5cclxuICAgICAgICBpZiAodG9vbFswXSA9PT0gZS5rZXkpIHtcclxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGRpc3BhdGNoKHsgdG9vbCB9KTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn0iLCJpbXBvcnQgeyBJU3RhdGUgfSBmcm9tICcuLy4uL3RzL2luZGV4JztcclxuaW1wb3J0IHsgZWx0IH0gZnJvbSAnLi8uLi91dGlscy9lbHQnO1xyXG5pbXBvcnQgeyBkcmF3UGljdHVyZSB9IGZyb20gJy4uL3V0aWxzL2RyYXdQaWN0dXJlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTYXZlQnV0dG9uIHtcclxuICBwaWN0dXJlOiBhbnk7XHJcbiAgZG9tOiBIVE1MQnV0dG9uRWxlbWVudDtcclxuICBjb25zdHJ1Y3RvcihzdGF0ZTogSVN0YXRlKSB7XHJcbiAgICB0aGlzLnBpY3R1cmUgPSBzdGF0ZS5waWN0dXJlO1xyXG4gICAgdGhpcy5kb20gPSAoZWx0KCdidXR0b24nLCB7XHJcbiAgICAgIG9uY2xpY2s6ICgpID0+IHRoaXMuc2F2ZSgpXHJcbiAgICB9LCAn8J+SviDQodC+0YXRgNCw0L3QuNGC0Yw6ICcpIGFzIEhUTUxCdXR0b25FbGVtZW50KVxyXG4gIH1cclxuXHJcbiAgc2F2ZSgpIHtcclxuICAgIGxldCBjYW52YXMgPSAoZWx0KCdjYW52YXMnLCB7fSkgYXMgSFRNTENhbnZhc0VsZW1lbnQpO1xyXG4gICAgZHJhd1BpY3R1cmUodGhpcy5waWN0dXJlLCBjYW52YXMsIDEpO1xyXG4gICAgbGV0IGxpbmsgPSBlbHQoJ2EnLCB7XHJcbiAgICAgIGhyZWY6IGNhbnZhcy50b0RhdGFVUkwoKSxcclxuICAgICAgZG93bmxvYWQ6ICdwaXhlbGFydC5wbmcnXHJcbiAgICB9KTtcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7XHJcbiAgICBsaW5rLmNsaWNrKCk7XHJcbiAgICBsaW5rLnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgc3luY1N0YXRlKHN0YXRlOiBJU3RhdGUpIHtcclxuICAgIHRoaXMucGljdHVyZSA9IHN0YXRlLnBpY3R1cmVcclxuICB9XHJcbn0gIiwiaW1wb3J0IHsgSVN0YXRlIH0gZnJvbSAnLi9zcmMvdHMvaW5kZXgnO1xyXG5pbXBvcnQgeyBsaW5lIH0gZnJvbSAnLi9zcmMvQ29tcG9uZW50cy9Ub29scy9saW5lJztcclxuaW1wb3J0IHsgY2lyY2xlIH0gZnJvbSAnLi9zcmMvQ29tcG9uZW50cy9Ub29scy9jaXJjbGUnO1xyXG5pbXBvcnQgeyBVbmRvQnV0dG9uLCBoaXN0b3J5VXBkYXRlU3RhdGUgfSBmcm9tICcuL3NyYy9oaXN0b3J5L2luZGV4JztcclxuaW1wb3J0IHsgTG9hZEJ1dHRvbiB9IGZyb20gJy4vc3JjL1NhdmVBbmRMb2FkL0xvYWQnO1xyXG5pbXBvcnQgeyBUb29sU2VsZWN0IH0gZnJvbSAnLi9zcmMvQ29tcG9uZW50cy9Ub29scy9Ub29sU2VsZWN0JztcclxuaW1wb3J0IHsgQ29sb3JTZWxlY3QgfSBmcm9tICcuL3NyYy9Db21wb25lbnRzL1Rvb2xzL0NvbG9yU2VsZWN0JztcclxuaW1wb3J0IHsgcGljayB9IGZyb20gJy4vc3JjL0NvbXBvbmVudHMvVG9vbHMvcGlja0NvbG9yJztcclxuaW1wb3J0IHsgcmVjdGFuZ2xlIH0gZnJvbSAnLi9zcmMvQ29tcG9uZW50cy9Ub29scy9yZWN0YW5nbGUnO1xyXG5pbXBvcnQgeyBmaWxsIH0gZnJvbSAnLi9zcmMvQ29tcG9uZW50cy9Ub29scy9maWxsJztcclxuaW1wb3J0IHsgZHJhdyB9IGZyb20gJy4vc3JjL0NvbXBvbmVudHMvVG9vbHMvZHJhdyc7XHJcbmltcG9ydCB7IFBpeGVsRWRpdG9yIH0gZnJvbSAnLi9zcmMvQ29tcG9uZW50cy9QaXhlbEVkaXRvcic7XHJcbmltcG9ydCB7IFBpY3R1cmUgfSBmcm9tICcuL3NyYy9Db21wb25lbnRzL1BpY3R1cmUnO1xyXG5pbXBvcnQgeyBJQWN0aW9uIH0gZnJvbSAnLi9zcmMvdHMnO1xyXG5pbXBvcnQgeyBTYXZlQnV0dG9uIH0gZnJvbSAnLi9zcmMvU2F2ZUFuZExvYWQvU2F2ZSc7XHJcblxyXG5sZXQgc3RhdGUgPSB7XHJcbiAgdG9vbDogXCJkcmF3XCIsXHJcbiAgY29sb3I6IFwiIzAwMDAwMFwiLFxyXG4gIHBpY3R1cmU6IFBpY3R1cmUuZW1wdHkoNjAsIDMwLCBcIiNmMGYwZjBcIiksXHJcbiAgZG9uZTogW10sXHJcbiAgZG9uZUF0OiAwLFxyXG59O1xyXG5cclxuY29uc3QgYmFzZVRvb2xzID0geyBkcmF3LCBmaWxsLCByZWN0YW5nbGUsIHBpY2ssIGNpcmNsZSwgbGluZSB9XHJcblxyXG5jb25zdCBiYXNlQ29udHJvbHMgPSBbVG9vbFNlbGVjdCwgQ29sb3JTZWxlY3QsIFNhdmVCdXR0b24sIExvYWRCdXR0b24sIFVuZG9CdXR0b25dO1xyXG5cclxuZnVuY3Rpb24gc3RhcnRQaXhlbEVkaXRvcih7XHJcbiAgc3RhdGU6IElTdGF0ZSA9IHN0YXRlLFxyXG4gIHRvb2xzID0gYmFzZVRvb2xzLFxyXG4gIGNvbnRyb2xzID0gYmFzZUNvbnRyb2xzXHJcbn0pIHtcclxuICBsZXQgYXBwID0gbmV3IFBpeGVsRWRpdG9yKHN0YXRlLCB7XHJcbiAgICB0b29scyxcclxuICAgIGNvbnRyb2xzLFxyXG4gICAgZGlzcGF0Y2goYWN0aW9uOiBJQWN0aW9uKSB7XHJcbiAgICAgIHN0YXRlID0gaGlzdG9yeVVwZGF0ZVN0YXRlKHN0YXRlLCBhY3Rpb24pO1xyXG4gICAgICBhcHAuc3luY1N0YXRlKHN0YXRlKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIGFwcC5kb207XHJcbn1cclxuXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXZcIikuYXBwZW5kQ2hpbGQoc3RhcnRQaXhlbEVkaXRvcih7fSkpOyIsImltcG9ydCB7IElTdGF0ZSwgSVBvcywgSURpc3BhdGNoIH0gZnJvbSAnLi8uLi8uLi90cy9pbmRleCc7XHJcbmltcG9ydCB7IGRyYXdMaW5lIH0gZnJvbSAnLi9saW5lJztcclxuXHJcbmV4cG9ydCBjb25zdCBkcmF3ID0gKHBvczogSVBvcywgc3RhdGU6IElTdGF0ZSwgZGlzcGF0Y2g6IElEaXNwYXRjaCkgPT4ge1xyXG4gIGZ1bmN0aW9uIGNvbm5lY3QobmV3UG9zOiBJUG9zLCBzdGF0ZTogSVN0YXRlKSB7XHJcbiAgICBsZXQgbGluZSA9IGRyYXdMaW5lKHBvcywgbmV3UG9zLCBzdGF0ZS5jb2xvcik7XHJcbiAgICBwb3MgPSBuZXdQb3M7XHJcbiAgICBkaXNwYXRjaCh7IHBpY3R1cmU6IHN0YXRlLnBpY3R1cmUuZHJhdyhsaW5lKSB9KTtcclxuICB9XHJcbiAgY29ubmVjdChwb3MsIHN0YXRlKTtcclxuXHJcbiAgcmV0dXJuIGNvbm5lY3Q7XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IElTdGF0ZSwgSURpc3BhdGNoLCBJUG9zIH0gZnJvbSAnLi8uLi8uLi90cy9pbmRleCc7XHJcbmltcG9ydCB7IGFyb3VuZCB9IGZyb20gXCIuLi8uLi9jb25zdHNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBmaWxsID0gKHsgeCwgeSB9OiBJUG9zLCBzdGF0ZTogSVN0YXRlLCBkaXNwYXRjaDogSURpc3BhdGNoKSA9PiB7XHJcbiAgbGV0IHRhcmdldENvbG9yID0gc3RhdGUucGljdHVyZS5waXhlbCh4LCB5KTtcclxuICBsZXQgZHJhd24gPSBbeyB4LCB5LCBjb2xvcjogc3RhdGUuY29sb3IgfV07XHJcblxyXG4gIGZvciAobGV0IGRvbmUgPSAwOyBkb25lIDwgZHJhd24ubGVuZ3RoOyBkb25lKyspIHtcclxuICAgIGZvciAoY29uc3QgeyBkeCwgZHkgfSBvZiBhcm91bmQpIHtcclxuICAgICAgbGV0IHggPSBkcmF3bltkb25lXS54ICsgZHg7XHJcbiAgICAgIGxldCB5ID0gZHJhd25bZG9uZV0ueSArIGR5O1xyXG5cclxuICAgICAgaWYgKHggPj0gMCAmJiB4IDwgc3RhdGUucGljdHVyZS53aWR0aCAmJlxyXG4gICAgICAgIHkgPj0gMCAmJiB5IDwgc3RhdGUucGljdHVyZS5oZWlnaHQgJiZcclxuICAgICAgICBzdGF0ZS5waWN0dXJlLnBpeGVsKHgsIHkpID09PSB0YXJnZXRDb2xvciAmJlxyXG4gICAgICAgICFkcmF3bi5zb21lKHAgPT4gcC54ID09PSB4ICYmIHAueSA9PT0geSkpIHtcclxuICAgICAgICBkcmF3bi5wdXNoKHsgeCwgeSwgY29sb3I6IHN0YXRlLmNvbG9yIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIGRpc3BhdGNoKHsgcGljdHVyZTogc3RhdGUucGljdHVyZS5kcmF3KGRyYXduKSB9KTtcclxufSIsImltcG9ydCB7IElQb3MsIElTdGF0ZSwgSURpc3BhdGNoIH0gZnJvbSAnLi8uLi8uLi90cy9pbmRleCc7XHJcblxyXG5leHBvcnQgY29uc3QgcmVjdGFuZ2xlID0gKHN0YXJ0OiBJUG9zLCBzdGF0ZTogSVN0YXRlLCBkaXNwYXRjaDogSURpc3BhdGNoKSA9PiB7XHJcbiAgZnVuY3Rpb24gZHJhd1JlY3RhbmdsZShwb3M6IElQb3MpIHtcclxuICAgIGxldCB4U3RhcnQgPSBNYXRoLm1pbihzdGFydC54LCBwb3MueCk7XHJcbiAgICBsZXQgeVN0YXJ0ID0gTWF0aC5taW4oc3RhcnQueSwgcG9zLnkpO1xyXG4gICAgbGV0IHhFbmQgPSBNYXRoLm1heChzdGFydC54LCBwb3MueCk7XHJcbiAgICBsZXQgeUVuZCA9IE1hdGgubWF4KHN0YXJ0LnksIHBvcy55KTtcclxuXHJcbiAgICBsZXQgZHJhd24gPSBbXTtcclxuICAgIGZvciAobGV0IHkgPSB5U3RhcnQ7IHkgPD0geUVuZDsgeSsrKSB7XHJcbiAgICAgIGZvciAobGV0IHggPSB4U3RhcnQ7IHggPD0geEVuZDsgeCsrKSB7XHJcbiAgICAgICAgZHJhd24ucHVzaCh7IHgsIHksIGNvbG9yOiBzdGF0ZS5jb2xvciB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBkaXNwYXRjaCh7IHBpY3R1cmU6IHN0YXRlLnBpY3R1cmUuZHJhdyhkcmF3bikgfSk7XHJcbiAgfVxyXG4gIGRyYXdSZWN0YW5nbGUoc3RhcnQpO1xyXG4gIHJldHVybiBkcmF3UmVjdGFuZ2xlO1xyXG59IiwiaW1wb3J0IHsgSVBvcywgSVN0YXRlLCBJRGlzcGF0Y2ggfSBmcm9tICcuLy4uLy4uL3RzL2luZGV4JztcclxuXHJcbmV4cG9ydCBjb25zdCBwaWNrID0gKHBvczogSVBvcywgc3RhdGU6IElTdGF0ZSwgZGlzcGF0Y2g6IElEaXNwYXRjaCkgPT4ge1xyXG4gIGRpc3BhdGNoKHsgY29sb3I6IChzdGF0ZS5waWN0dXJlLnBpeGVsKHBvcy54LCBwb3MueSkgYXMgc3RyaW5nKSB9KTtcclxufSIsImltcG9ydCB7IElQb3MsIElTdGF0ZSwgSURpc3BhdGNoIH0gZnJvbSAnLi8uLi8uLi90cy9pbmRleCc7XHJcblxyXG5leHBvcnQgY29uc3QgY2lyY2xlID0gKHBvczogSVBvcywgc3RhdGU6IElTdGF0ZSwgZGlzcGF0Y2g6IElEaXNwYXRjaCkgPT4ge1xyXG5cclxuICBmdW5jdGlvbiBkcmF3Q2lyY2xlKHRvOiBJUG9zKSB7XHJcbiAgICBsZXQgcmFkaXVzID0gTWF0aC5zcXJ0KE1hdGgucG93KHRvLnggLSBwb3MueCwgMikgKyBNYXRoLnBvdyh0by55IC0gcG9zLnksIDIpKTtcclxuICAgIGxldCByYWRpdXNDID0gTWF0aC5jZWlsKHJhZGl1cyk7XHJcbiAgICBsZXQgZHJhd24gPSBbXTtcclxuXHJcbiAgICBmb3IgKGxldCBkeSA9IC1yYWRpdXNDOyBkeSA8PSByYWRpdXNDOyBkeSsrKSB7XHJcbiAgICAgIGZvciAobGV0IGR4ID0gLXJhZGl1c0M7IGR4IDw9IHJhZGl1c0M7IGR4KyspIHtcclxuXHJcbiAgICAgICAgbGV0IGRpc3QgPSBNYXRoLnNxcnQoTWF0aC5wb3coZHgsIDIpICsgTWF0aC5wb3coZHksIDIpKTtcclxuXHJcbiAgICAgICAgaWYgKGRpc3QgPiByYWRpdXMpIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHkgPSBwb3MueSArIGR5O1xyXG4gICAgICAgIGxldCB4ID0gcG9zLnggKyBkeDtcclxuXHJcbiAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gc3RhdGUucGljdHVyZS5oZWlnaHQgfHxcclxuICAgICAgICAgIHggPCAwIHx8IHggPj0gc3RhdGUucGljdHVyZS53aWR0aCkgY29udGludWU7XHJcbiAgICAgICAgZHJhd24ucHVzaCh7IHgsIHksIGNvbG9yOiBzdGF0ZS5jb2xvciB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZGlzcGF0Y2goeyBwaWN0dXJlOiBzdGF0ZS5waWN0dXJlLmRyYXcoZHJhd24pIH0pO1xyXG4gIH1cclxuICBkcmF3Q2lyY2xlKHBvcyk7XHJcbiAgcmV0dXJuIGRyYXdDaXJjbGU7XHJcbn1cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0=